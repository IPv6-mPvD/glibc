/* searchaction.c generated by valac 0.40.4, the Vala compiler
 * generated from searchaction.vala, do not modify */

/*
 Copyright (C) 2012 Christian Dywan <christian@twotoasts.de>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.

 See the file COPYING for the full license text.
*/
/*
struct FormSpec {
    public string html;
    public Pango.EllipsizeMode ellipsize;
    public string? uri;
    public string? title;
}

const FormSpec[] forms = {
    { "<form></form>", Pango.EllipsizeMode.END, null, null },
    { "<form><input></form>", Pango.EllipsizeMode.END, null, null }
};
*/


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include "midori/midori-searchaction.h"
#include "midori/midori-app.h"


#define TYPE_TOKEN_SPEC (token_spec_get_type ())
typedef struct _TokenSpec TokenSpec;
#define _g_free0(var) (var = (g_free (var), NULL))

struct _TokenSpec {
	gchar* uri;
	gchar* expected_token;
};



void searchaction_form (void);
GType token_spec_get_type (void) G_GNUC_CONST;
TokenSpec* token_spec_dup (const TokenSpec* self);
void token_spec_free (TokenSpec* self);
void token_spec_copy (const TokenSpec* self,
                      TokenSpec* dest);
void token_spec_destroy (TokenSpec* self);
void searchaction_token (void);
void _vala_main (gchar** args,
                 int args_length1);
static void _searchaction_form_gtest_func (void);
static void _searchaction_token_gtest_func (void);

const TokenSpec tokens[7] = {{"https://bugs.launchpad.net/midori/+bugs", "lnch"}, {"https://duckduckgo.com/search", "dckd"}, {"http://en.wikipedia.org/w/index.php?title=Special:Search&profile=defau" \
"lt&search=%s&fulltext=Search&", "wkpd"}, {"about:blank", ""}, {"", ""}, {"file:///", ""}, {"file:///form.html", ""}};

void
searchaction_form (void)
{
}


void
token_spec_copy (const TokenSpec* self,
                 TokenSpec* dest)
{
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	_tmp0_ = (*self).uri;
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	_g_free0 ((*dest).uri);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	(*dest).uri = _tmp1_;
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	_tmp2_ = (*self).expected_token;
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	_g_free0 ((*dest).expected_token);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	(*dest).expected_token = _tmp3_;
#line 94 "searchaction.c"
}


void
token_spec_destroy (TokenSpec* self)
{
#line 42 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	_g_free0 ((*self).uri);
#line 43 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	_g_free0 ((*self).expected_token);
#line 105 "searchaction.c"
}


TokenSpec*
token_spec_dup (const TokenSpec* self)
{
	TokenSpec* dup;
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	dup = g_new0 (TokenSpec, 1);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	token_spec_copy (self, dup);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	return dup;
#line 119 "searchaction.c"
}


void
token_spec_free (TokenSpec* self)
{
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	token_spec_destroy (self);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	g_free (self);
#line 130 "searchaction.c"
}


GType
token_spec_get_type (void)
{
	static volatile gsize token_spec_type_id__volatile = 0;
	if (g_once_init_enter (&token_spec_type_id__volatile)) {
		GType token_spec_type_id;
		token_spec_type_id = g_boxed_type_register_static ("TokenSpec", (GBoxedCopyFunc) token_spec_dup, (GBoxedFreeFunc) token_spec_free);
		g_once_init_leave (&token_spec_type_id__volatile, token_spec_type_id);
	}
	return token_spec_type_id__volatile;
}


void
searchaction_token (void)
{
	{
		TokenSpec* token_collection = NULL;
		gint token_collection_length1 = 0;
		gint _token_collection_size_ = 0;
		gint token_it = 0;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
		token_collection = tokens;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
		token_collection_length1 = G_N_ELEMENTS (tokens);
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
		for (token_it = 0; token_it < G_N_ELEMENTS (tokens); token_it = token_it + 1) {
#line 161 "searchaction.c"
			TokenSpec token = {0};
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
			token = token_collection[token_it];
#line 165 "searchaction.c"
			{
				TokenSpec _tmp0_;
				const gchar* _tmp1_;
				TokenSpec _tmp2_;
				const gchar* _tmp3_;
				gchar* _tmp4_;
				gchar* _tmp5_;
				TokenSpec _tmp6_;
				const gchar* _tmp7_;
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				_tmp0_ = token;
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				_tmp1_ = _tmp0_.uri;
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				_tmp2_ = token;
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				_tmp3_ = _tmp2_.uri;
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				_tmp4_ = midori_search_action_token_for_uri (_tmp3_);
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				_tmp5_ = _tmp4_;
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				_tmp6_ = token;
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				_tmp7_ = _tmp6_.expected_token;
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				katze_assert_str_equal (_tmp1_, _tmp5_, _tmp7_);
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
				_g_free0 (_tmp5_);
#line 195 "searchaction.c"
			}
		}
	}
}


static void
_searchaction_form_gtest_func (void)
{
#line 67 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	searchaction_form ();
#line 207 "searchaction.c"
}


static void
_searchaction_token_gtest_func (void)
{
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	searchaction_token ();
#line 216 "searchaction.c"
}


void
_vala_main (gchar** args,
            int args_length1)
{
#line 65 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	g_test_init (&args_length1, &args, NULL);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	midori_app_setup (&args_length1, &args, NULL);
#line 67 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	g_test_add_func ("/searchaction/form", _searchaction_form_gtest_func);
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	g_test_add_func ("/searchaction/token", _searchaction_token_gtest_func);
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	g_test_run ();
#line 234 "searchaction.c"
}


int
main (int argc,
      char ** argv)
{
#line 64 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	_vala_main (argv, argc);
#line 64 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/searchaction.vala"
	return 0;
#line 246 "searchaction.c"
}



