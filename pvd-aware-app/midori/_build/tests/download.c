/* download.c generated by valac 0.40.4, the Vala compiler
 * generated from download.vala, do not modify */

/*
 Copyright (C) 2012 Christian Dywan <christian@twotoasts.de>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.

 See the file COPYING for the full license text.
*/


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include "midori-core.h"
#include <glib/gstdio.h>
#include "webkit/webkit.h"
#include <libsoup/soup.h>
#include "midori/midori-view.h"
#include <unistd.h>
#include "midori/midori-app.h"


#define TYPE_TEST_CASE (test_case_get_type ())
typedef struct _TestCase TestCase;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _Block1Data Block1Data;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define __g_slist_free___vala_SoupURI_free0_0(var) ((var == NULL) ? NULL : (var = (_g_slist_free___vala_SoupURI_free0_ (var), NULL)))
#define _g_main_context_unref0(var) ((var == NULL) ? NULL : (var = (g_main_context_unref (var), NULL)))
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _TestCase {
	gchar* data;
	gchar* mime_type;
	gchar* expected_filename;
	gchar* expected_extension;
};

struct _Block1Data {
	int _ref_count_;
	WebKitDownload* download;
	gchar* filename;
};



GType test_case_get_type (void) G_GNUC_CONST;
TestCase* test_case_dup (const TestCase* self);
void test_case_free (TestCase* self);
void test_case_copy (const TestCase* self,
                     TestCase* dest);
void test_case_destroy (TestCase* self);
void download_suggestion (void);
void download_extension (void);
void download_unique (void);
void download_properties (void);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static void _vala_SoupURI_free (SoupURI* self);
static void __vala_SoupURI_free0_ (gpointer var);
static inline void _g_slist_free___vala_SoupURI_free0_ (GSList* self);
static void __lambda4_ (SoupServer* server,
                 SoupMessage* msg,
                 const gchar* path,
                 GHashTable* query,
                 SoupClientContext* client);
static void ___lambda4__soup_server_callback (SoupServer* server,
                                       SoupMessage* msg,
                                       const gchar* path,
                                       GHashTable* query,
                                       SoupClientContext* client,
                                       gpointer self);
static void __lambda5_ (Block1Data* _data1_,
                 GParamSpec* pspec);
static void ___lambda5__g_object_notify (GObject* _sender,
                                  GParamSpec* pspec,
                                  gpointer self);
void _vala_main (gchar** args,
                 int args_length1);
static void _download_suggestion_gtest_func (void);
static void _download_extension_gtest_func (void);
static void _download_unique_gtest_func (void);
static void _download_properties_gtest_func (void);

const TestCase filenames[4] = {{"file:///tmp/midori-user/tumblr123.jpg", "image/jpg", "tumblr123.jpg", ".jpg"}, {"https://green.cat/8019B6/a.b/500.jpg", "image/jpg", "500.jpg", ".jpg"}, {"http://example.com/file.png", "image/png", "file.png", ".png"}, {"http://svn.sf.net/doc/doxy_to_dev.xsl.m4?rev=253", "application/xslt+xml", "doxy_to_dev.xsl.m4", ".m4"}};

void
test_case_copy (const TestCase* self,
                TestCase* dest)
{
	const gchar* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	const gchar* _tmp4_;
	gchar* _tmp5_;
	const gchar* _tmp6_;
	gchar* _tmp7_;
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp0_ = (*self).data;
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp1_ = g_strdup (_tmp0_);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 ((*dest).data);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	(*dest).data = _tmp1_;
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp2_ = (*self).mime_type;
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp3_ = g_strdup (_tmp2_);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 ((*dest).mime_type);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	(*dest).mime_type = _tmp3_;
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp4_ = (*self).expected_filename;
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp5_ = g_strdup (_tmp4_);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 ((*dest).expected_filename);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	(*dest).expected_filename = _tmp5_;
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp6_ = (*self).expected_extension;
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp7_ = g_strdup (_tmp6_);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 ((*dest).expected_extension);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	(*dest).expected_extension = _tmp7_;
#line 142 "download.c"
}


void
test_case_destroy (TestCase* self)
{
#line 13 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 ((*self).data);
#line 14 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 ((*self).mime_type);
#line 15 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 ((*self).expected_filename);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 ((*self).expected_extension);
#line 157 "download.c"
}


TestCase*
test_case_dup (const TestCase* self)
{
	TestCase* dup;
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	dup = g_new0 (TestCase, 1);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	test_case_copy (self, dup);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	return dup;
#line 171 "download.c"
}


void
test_case_free (TestCase* self)
{
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	test_case_destroy (self);
#line 12 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_free (self);
#line 182 "download.c"
}


GType
test_case_get_type (void)
{
	static volatile gsize test_case_type_id__volatile = 0;
	if (g_once_init_enter (&test_case_type_id__volatile)) {
		GType test_case_type_id;
		test_case_type_id = g_boxed_type_register_static ("TestCase", (GBoxedCopyFunc) test_case_dup, (GBoxedFreeFunc) test_case_free);
		g_once_init_leave (&test_case_type_id__volatile, test_case_type_id);
	}
	return test_case_type_id__volatile;
}


void
download_suggestion (void)
{
	{
		TestCase* filename_collection = NULL;
		gint filename_collection_length1 = 0;
		gint _filename_collection_size_ = 0;
		gint filename_it = 0;
#line 27 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		filename_collection = filenames;
#line 27 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		filename_collection_length1 = G_N_ELEMENTS (filenames);
#line 27 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		for (filename_it = 0; filename_it < G_N_ELEMENTS (filenames); filename_it = filename_it + 1) {
#line 213 "download.c"
			TestCase filename = {0};
#line 27 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			filename = filename_collection[filename_it];
#line 217 "download.c"
			{
				gchar* _result_ = NULL;
				TestCase _tmp0_;
				const gchar* _tmp1_;
				TestCase _tmp2_;
				const gchar* _tmp3_;
				gchar* _tmp4_;
				TestCase _tmp5_;
				const gchar* _tmp6_;
				const gchar* _tmp7_;
				TestCase _tmp8_;
				const gchar* _tmp9_;
#line 28 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp0_ = filename;
#line 28 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp1_ = _tmp0_.mime_type;
#line 28 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp2_ = filename;
#line 28 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp3_ = _tmp2_.data;
#line 28 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp4_ = midori_download_get_filename_suggestion_for_uri (_tmp1_, _tmp3_);
#line 28 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_result_ = _tmp4_;
#line 30 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp5_ = filename;
#line 30 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp6_ = _tmp5_.data;
#line 30 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp7_ = _result_;
#line 30 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp8_ = filename;
#line 30 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp9_ = _tmp8_.expected_filename;
#line 30 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				katze_assert_str_equal (_tmp6_, _tmp7_, _tmp9_);
#line 27 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_g_free0 (_result_);
#line 256 "download.c"
			}
		}
	}
}


void
download_extension (void)
{
	{
		TestCase* filename_collection = NULL;
		gint filename_collection_length1 = 0;
		gint _filename_collection_size_ = 0;
		gint filename_it = 0;
#line 35 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		filename_collection = filenames;
#line 35 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		filename_collection_length1 = G_N_ELEMENTS (filenames);
#line 35 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		for (filename_it = 0; filename_it < G_N_ELEMENTS (filenames); filename_it = filename_it + 1) {
#line 277 "download.c"
			TestCase filename = {0};
#line 35 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			filename = filename_collection[filename_it];
#line 281 "download.c"
			{
				gchar* _result_ = NULL;
				TestCase _tmp0_;
				const gchar* _tmp1_;
				gchar* _tmp2_;
				TestCase _tmp3_;
				const gchar* _tmp4_;
				const gchar* _tmp5_;
				TestCase _tmp6_;
				const gchar* _tmp7_;
#line 36 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp0_ = filename;
#line 36 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp1_ = _tmp0_.data;
#line 36 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp2_ = midori_download_get_extension_for_uri (_tmp1_, NULL);
#line 36 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_result_ = _tmp2_;
#line 37 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp3_ = filename;
#line 37 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp4_ = _tmp3_.data;
#line 37 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp5_ = _result_;
#line 37 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp6_ = filename;
#line 37 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp7_ = _tmp6_.expected_extension;
#line 37 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				katze_assert_str_equal (_tmp4_, _tmp5_, _tmp7_);
#line 35 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_g_free0 (_result_);
#line 314 "download.c"
			}
		}
	}
}


void
download_unique (void)
{
	gchar* folder = NULL;
	gchar* _tmp0_;
	gchar* filename = NULL;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* org_filename = NULL;
	const gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* unique = NULL;
	const gchar* _tmp5_;
	gchar* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	const gchar* _tmp9_;
	const gchar* _tmp36_;
	gchar* _tmp37_;
	const gchar* _tmp38_;
	gchar* _tmp39_;
	const gchar* _tmp40_;
	const gchar* _tmp41_;
	const gchar* _tmp42_;
	const gchar* _tmp43_;
	GError * _inner_error_ = NULL;
#line 42 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp0_ = midori_paths_make_tmp_dir ("cacheXXXXXX");
#line 42 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	folder = _tmp0_;
#line 43 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp1_ = folder;
#line 43 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp2_ = g_build_path (G_DIR_SEPARATOR_S, _tmp1_, "foo.png", NULL);
#line 43 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	filename = _tmp2_;
#line 44 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp3_ = folder;
#line 44 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp4_ = g_build_path (G_DIR_SEPARATOR_S, _tmp3_, "foo.png", NULL);
#line 44 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	org_filename = _tmp4_;
#line 45 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp5_ = org_filename;
#line 45 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp6_ = midori_download_get_unique_filename (_tmp5_);
#line 45 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	unique = _tmp6_;
#line 46 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp7_ = folder;
#line 46 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp8_ = unique;
#line 46 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp9_ = filename;
#line 46 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	katze_assert_str_equal (_tmp7_, _tmp8_, _tmp9_);
#line 377 "download.c"
	{
		const gchar* _tmp10_;
		const gchar* _tmp11_;
		gchar* _tmp12_;
		const gchar* _tmp13_;
		gchar* _tmp14_;
		const gchar* _tmp15_;
		const gchar* _tmp16_;
		const gchar* _tmp17_;
		const gchar* _tmp18_;
		const gchar* _tmp19_;
		gchar* _tmp20_;
		const gchar* _tmp21_;
		gchar* _tmp22_;
		const gchar* _tmp23_;
		const gchar* _tmp24_;
		const gchar* _tmp25_;
#line 48 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp10_ = filename;
#line 48 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_file_set_contents (_tmp10_, "12345", (gssize) -1, &_inner_error_);
#line 48 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 401 "download.c"
			goto __catch0_g_error;
		}
#line 49 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp11_ = org_filename;
#line 49 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp12_ = midori_download_get_unique_filename (_tmp11_);
#line 49 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (unique);
#line 49 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		unique = _tmp12_;
#line 50 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp13_ = folder;
#line 50 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp14_ = g_build_path (G_DIR_SEPARATOR_S, _tmp13_, "foo-0.png", NULL);
#line 50 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (filename);
#line 50 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		filename = _tmp14_;
#line 51 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp15_ = folder;
#line 51 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp16_ = unique;
#line 51 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp17_ = filename;
#line 51 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		katze_assert_str_equal (_tmp15_, _tmp16_, _tmp17_);
#line 52 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp18_ = filename;
#line 52 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_file_set_contents (_tmp18_, "12345", (gssize) -1, &_inner_error_);
#line 52 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 434 "download.c"
			goto __catch0_g_error;
		}
#line 53 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp19_ = org_filename;
#line 53 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp20_ = midori_download_get_unique_filename (_tmp19_);
#line 53 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (unique);
#line 53 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		unique = _tmp20_;
#line 54 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp21_ = folder;
#line 54 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp22_ = g_build_path (G_DIR_SEPARATOR_S, _tmp21_, "foo-1.png", NULL);
#line 54 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (filename);
#line 54 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		filename = _tmp22_;
#line 55 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp23_ = folder;
#line 55 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp24_ = unique;
#line 55 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp25_ = filename;
#line 55 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		katze_assert_str_equal (_tmp23_, _tmp24_, _tmp25_);
#line 461 "download.c"
		{
			gint i = 0;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			i = 0;
#line 466 "download.c"
			{
				gboolean _tmp26_ = FALSE;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp26_ = TRUE;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				while (TRUE) {
#line 473 "download.c"
					gint _tmp28_;
					const gchar* _tmp29_;
					gint _tmp30_;
					gchar* _tmp31_;
					gchar* _tmp32_;
					gchar* _tmp33_;
					const gchar* _tmp34_;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					if (!_tmp26_) {
#line 483 "download.c"
						gint _tmp27_;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
						_tmp27_ = i;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
						i = _tmp27_ + 1;
#line 489 "download.c"
					}
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_tmp26_ = FALSE;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_tmp28_ = i;
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					if (!(_tmp28_ < 10)) {
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
						break;
#line 499 "download.c"
					}
#line 58 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_tmp29_ = folder;
#line 58 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_tmp30_ = i;
#line 58 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_tmp31_ = g_strdup_printf ("foo-%d.png", _tmp30_);
#line 58 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_tmp32_ = _tmp31_;
#line 58 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_tmp33_ = g_build_path (G_DIR_SEPARATOR_S, _tmp29_, _tmp32_, NULL);
#line 58 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_g_free0 (filename);
#line 58 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					filename = _tmp33_;
#line 58 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_g_free0 (_tmp32_);
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					_tmp34_ = filename;
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					g_file_set_contents (_tmp34_, "12345", (gssize) -1, &_inner_error_);
#line 59 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 523 "download.c"
						goto __catch0_g_error;
					}
				}
			}
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp35_;
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_error_ = _inner_error_;
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_inner_error_ = NULL;
#line 63 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp35_ = _error_->message;
#line 63 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_error ("download.vala:63: %s", _tmp35_);
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_error_free0 (_error_);
#line 545 "download.c"
	}
	__finally0:
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (unique);
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (org_filename);
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (filename);
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (folder);
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_clear_error (&_inner_error_);
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		return;
#line 564 "download.c"
	}
#line 65 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp36_ = org_filename;
#line 65 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp37_ = midori_download_get_unique_filename (_tmp36_);
#line 65 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (unique);
#line 65 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	unique = _tmp37_;
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp38_ = folder;
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp39_ = g_build_path (G_DIR_SEPARATOR_S, _tmp38_, "foo-10.png", NULL);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (filename);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	filename = _tmp39_;
#line 67 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp40_ = folder;
#line 67 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp41_ = unique;
#line 67 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp42_ = filename;
#line 67 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	katze_assert_str_equal (_tmp40_, _tmp41_, _tmp42_);
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp43_ = folder;
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_rmdir (_tmp43_);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (unique);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (org_filename);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (filename);
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (folder);
#line 602 "download.c"
}


static Block1Data*
block1_data_ref (Block1Data* _data1_)
{
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_atomic_int_inc (&_data1_->_ref_count_);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	return _data1_;
#line 613 "download.c"
}


static void
block1_data_unref (void * _userdata_)
{
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (_data1_->filename);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_object_unref0 (_data1_->download);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_slice_free (Block1Data, _data1_);
#line 630 "download.c"
	}
}


static void
_vala_SoupURI_free (SoupURI* self)
{
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_boxed_free (soup_uri_get_type (), self);
#line 640 "download.c"
}


static void
__vala_SoupURI_free0_ (gpointer var)
{
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	(var == NULL) ? NULL : (var = (_vala_SoupURI_free (var), NULL));
#line 649 "download.c"
}


static inline void
_g_slist_free___vala_SoupURI_free0_ (GSList* self)
{
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_slist_free_full (self, (GDestroyNotify) __vala_SoupURI_free0_);
#line 658 "download.c"
}


static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gboolean result = FALSE;
	gchar* _tmp0_;
#line 1417 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1417 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, FALSE);
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp0_ != NULL;
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 678 "download.c"
}


static guint8*
string_get_data (const gchar* self,
                 int* result_length1)
{
	guint8* result;
	guint8* res = NULL;
	gint res_length1;
	gint _res_size_;
	gint _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	guint8* _tmp3_;
	gint _tmp3__length1;
	guint8* _tmp4_;
	gint _tmp4__length1;
#line 1442 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1443 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	res = (guint8*) self;
#line 1443 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	res_length1 = -1;
#line 1443 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_res_size_ = res_length1;
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strlen (self);
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = _tmp0_;
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	res_length1 = (gint) _tmp1_;
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp2_ = res_length1;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp3_ = res;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp3__length1 = res_length1;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp4_ = _tmp3_;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp4__length1 = _tmp3__length1;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (result_length1) {
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		*result_length1 = _tmp4__length1;
#line 725 "download.c"
	}
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp4_;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 731 "download.c"
}


static void
__lambda4_ (SoupServer* server,
            SoupMessage* msg,
            const gchar* path,
            GHashTable* query,
            SoupClientContext* client)
{
	guint8* _tmp0_;
	gint _tmp0__length1;
	guint8* _tmp1_;
	gint _tmp1__length1;
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_return_if_fail (server != NULL);
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_return_if_fail (msg != NULL);
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_return_if_fail (path != NULL);
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_return_if_fail (client != NULL);
#line 90 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_usleep ((gulong) 1000000);
#line 91 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	if (string_contains (path, "/not_found/")) {
#line 92 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		soup_message_set_status (msg, (guint) 404);
#line 760 "download.c"
	} else {
#line 94 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		soup_message_set_status (msg, (guint) 200);
#line 764 "download.c"
	}
#line 95 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp0_ = string_get_data ("<body></body>", &_tmp0__length1);
#line 95 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp1_ = _tmp0_;
#line 95 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp1__length1 = _tmp0__length1;
#line 95 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	soup_message_set_response (msg, "text/html", SOUP_MEMORY_COPY, _tmp1_, (gsize) _tmp1__length1);
#line 774 "download.c"
}


static void
___lambda4__soup_server_callback (SoupServer* server,
                                  SoupMessage* msg,
                                  const gchar* path,
                                  GHashTable* query,
                                  SoupClientContext* client,
                                  gpointer self)
{
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	__lambda4_ (server, msg, path, query, client);
#line 788 "download.c"
}


static void
__lambda5_ (Block1Data* _data1_,
            GParamSpec* pspec)
{
	gchar* tee2 = NULL;
	WebKitDownload* _tmp0_;
	gchar* _tmp1_;
	const gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
#line 129 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_return_if_fail (pspec != NULL);
#line 130 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp0_ = _data1_->download;
#line 130 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp1_ = midori_download_calculate_tooltip (_tmp0_);
#line 130 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	tee2 = _tmp1_;
#line 131 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp2_ = _data1_->filename;
#line 131 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp3_ = g_path_get_basename (_tmp2_);
#line 131 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp4_ = _tmp3_;
#line 131 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_vala_assert (string_contains (tee2, _tmp4_), "tee2.contains (Path.get_basename (filename))");
#line 131 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (_tmp4_);
#line 129 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (tee2);
#line 822 "download.c"
}


static void
___lambda5__g_object_notify (GObject* _sender,
                             GParamSpec* pspec,
                             gpointer self)
{
#line 129 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	__lambda5_ (self, pspec);
#line 833 "download.c"
}


static gpointer
_g_main_context_ref0 (gpointer self)
{
#line 133 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	return self ? g_main_context_ref (self) : NULL;
#line 842 "download.c"
}


void
download_properties (void)
{
	Block1Data* _data1_;
	SoupServer* test_server = NULL;
	SoupServer* _tmp0_;
	guint port = 0U;
	GSList* _tmp2_;
	GSList* _tmp3_;
	gconstpointer _tmp4_;
	guint _tmp5_;
	guint _tmp6_;
	gchar* test_url = NULL;
	guint _tmp7_;
	gchar* _tmp8_;
	gchar* was_found_url = NULL;
	const gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* not_found_url = NULL;
	const gchar* _tmp11_;
	gchar* _tmp12_;
	const gchar* _tmp13_;
	WebKitNetworkRequest* _tmp14_;
	WebKitNetworkRequest* _tmp15_;
	WebKitDownload* _tmp16_;
	WebKitDownload* _tmp17_;
	WebKitDownload* _tmp18_;
	WebKitDownload* _tmp19_;
	WebKitDownload* _tmp20_;
	WebKitDownload* _tmp21_;
	gchar* uri = NULL;
	WebKitDownload* _tmp30_;
	WebKitDownload* _tmp31_;
	gchar* tee = NULL;
	WebKitDownload* _tmp32_;
	gchar* _tmp33_;
	const gchar* _tmp34_;
	const gchar* _tmp35_;
	gchar* _tmp36_;
	gchar* _tmp37_;
	WebKitDownload* _tmp38_;
	WebKitDownload* _tmp39_;
	GMainContext* loop = NULL;
	GMainContext* _tmp40_;
	GMainContext* _tmp41_;
	WebKitDownload* _tmp45_;
	WebKitDownloadStatus _tmp46_;
	WebKitDownloadStatus _tmp47_;
	const gchar* _tmp48_;
	WebKitNetworkRequest* _tmp49_;
	WebKitNetworkRequest* _tmp50_;
	WebKitDownload* _tmp51_;
	WebKitDownload* _tmp52_;
	WebKitDownload* _tmp53_;
	WebKitDownload* _tmp57_;
	WebKitDownloadStatus _tmp58_;
	WebKitDownloadStatus _tmp59_;
	GError * _inner_error_ = NULL;
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_data1_ = g_slice_new0 (Block1Data);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_data1_->_ref_count_ = 1;
#line 73 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp0_ = soup_server_new ("server-header", NULL, NULL, NULL);
#line 73 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	test_server = _tmp0_;
#line 912 "download.c"
	{
#line 75 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		soup_server_listen_local (test_server, (guint) 0, SOUP_SERVER_LISTEN_IPV4_ONLY, &_inner_error_);
#line 75 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 918 "download.c"
			goto __catch1_g_error;
		}
	}
	goto __finally1;
	__catch1_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp1_;
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_error_ = _inner_error_;
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_inner_error_ = NULL;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp1_ = _error_->message;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_error ("download.vala:78: %s", _tmp1_);
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_error_free0 (_error_);
#line 937 "download.c"
	}
	__finally1:
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_object_unref0 (test_server);
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		block1_data_unref (_data1_);
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_data1_ = NULL;
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_clear_error (&_inner_error_);
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		return;
#line 954 "download.c"
	}
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp2_ = soup_server_get_uris (test_server);
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp3_ = _tmp2_;
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp4_ = _tmp3_->data;
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp5_ = ((SoupURI*) _tmp4_)->port;
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp6_ = _tmp5_;
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	__g_slist_free___vala_SoupURI_free0_0 (_tmp3_);
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	port = _tmp6_;
#line 88 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp7_ = port;
#line 88 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp8_ = g_strdup_printf ("http://127.0.0.1:%u", _tmp7_);
#line 88 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	test_url = _tmp8_;
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	soup_server_add_handler (test_server, "/", ___lambda4__soup_server_callback, NULL, NULL);
#line 98 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp9_ = test_url;
#line 98 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp10_ = g_strconcat (_tmp9_, "/cat.png", NULL);
#line 98 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	was_found_url = _tmp10_;
#line 99 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp11_ = test_url;
#line 99 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp12_ = g_strconcat (_tmp11_, "/not_found/dog.png", NULL);
#line 99 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	not_found_url = _tmp12_;
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp13_ = was_found_url;
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp14_ = webkit_network_request_new (_tmp13_);
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp15_ = _tmp14_;
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp16_ = webkit_download_new (_tmp15_);
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp17_ = _tmp16_;
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_object_unref0 (_tmp15_);
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_data1_->download = _tmp17_;
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp18_ = _data1_->download;
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_vala_assert (midori_download_get_type (_tmp18_) == 0, "Midori.Download.get_type (download) == 0");
#line 106 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp19_ = _data1_->download;
#line 106 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	midori_download_set_type (_tmp19_, (gint) MIDORI_DOWNLOAD_OPEN);
#line 107 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp20_ = _data1_->download;
#line 107 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_vala_assert (midori_download_get_type (_tmp20_) == ((gint) MIDORI_DOWNLOAD_OPEN), "Midori.Download.get_type (download) == Midori.DownloadType.OPEN");
#line 108 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp21_ = _data1_->download;
#line 108 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_vala_assert (midori_download_get_progress (_tmp21_) == 0.0, "Midori.Download.get_progress (download) == 0.0");
#line 1020 "download.c"
	{
		gint _tmp22_ = 0;
		gchar* _tmp23_ = NULL;
		gint _tmp24_;
		gchar* _tmp25_ = NULL;
		const gchar* _tmp26_;
		gchar* _tmp27_;
		gchar* _tmp28_;
#line 112 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp24_ = g_file_open_tmp ("XXXXXX", &_tmp23_, &_inner_error_);
#line 112 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (_data1_->filename);
#line 112 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_data1_->filename = _tmp23_;
#line 112 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp22_ = _tmp24_;
#line 112 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1039 "download.c"
			goto __catch2_g_error;
		}
#line 112 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		close (_tmp22_);
#line 113 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp26_ = _data1_->filename;
#line 113 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp27_ = g_filename_to_uri (_tmp26_, NULL, &_inner_error_);
#line 113 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp25_ = _tmp27_;
#line 113 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1052 "download.c"
			goto __catch2_g_error;
		}
#line 113 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp28_ = _tmp25_;
#line 113 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp25_ = NULL;
#line 113 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (uri);
#line 113 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		uri = _tmp28_;
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (_tmp25_);
#line 1065 "download.c"
	}
	goto __finally2;
	__catch2_g_error:
	{
		GError* _error_ = NULL;
		const gchar* _tmp29_;
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_error_ = _inner_error_;
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_inner_error_ = NULL;
#line 116 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp29_ = _error_->message;
#line 116 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_error ("download.vala:116: %s", _tmp29_);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_error_free0 (_error_);
#line 1082 "download.c"
	}
	__finally2:
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (uri);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (not_found_url);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (was_found_url);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_free0 (test_url);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_g_object_unref0 (test_server);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		block1_data_unref (_data1_);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_data1_ = NULL;
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		g_clear_error (&_inner_error_);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		return;
#line 1107 "download.c"
	}
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp30_ = _data1_->download;
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	webkit_download_set_destination_uri (_tmp30_, uri);
#line 123 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp31_ = _data1_->download;
#line 123 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	webkit_download_start (_tmp31_);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp32_ = _data1_->download;
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp33_ = midori_download_calculate_tooltip (_tmp32_);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	tee = _tmp33_;
#line 126 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp34_ = tee;
#line 126 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp35_ = _data1_->filename;
#line 126 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp36_ = g_path_get_basename (_tmp35_);
#line 126 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp37_ = _tmp36_;
#line 126 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_vala_assert (string_contains (_tmp34_, _tmp37_), "tee.contains (Path.get_basename (filename))");
#line 126 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (_tmp37_);
#line 127 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp38_ = _data1_->download;
#line 127 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_vala_assert (midori_download_get_progress (_tmp38_) == 0.0, "Midori.Download.get_progress (download) == 0.0");
#line 129 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp39_ = _data1_->download;
#line 129 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_signal_connect_data ((GObject*) _tmp39_, "notify::progress", (GCallback) ___lambda5__g_object_notify, block1_data_ref (_data1_), (GClosureNotify) block1_data_unref, 0);
#line 133 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp40_ = g_main_context_default ();
#line 133 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp41_ = _g_main_context_ref0 (_tmp40_);
#line 133 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	loop = _tmp41_;
#line 1149 "download.c"
	{
		gboolean _tmp42_ = FALSE;
#line 134 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp42_ = TRUE;
#line 134 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		while (TRUE) {
#line 1156 "download.c"
			GMainContext* _tmp44_;
#line 134 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			if (!_tmp42_) {
#line 1160 "download.c"
				WebKitDownload* _tmp43_;
#line 134 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp43_ = _data1_->download;
#line 134 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				if (!(!midori_download_is_finished (_tmp43_))) {
#line 134 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					break;
#line 1168 "download.c"
				}
			}
#line 134 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			_tmp42_ = FALSE;
#line 134 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			_tmp44_ = loop;
#line 134 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			g_main_context_iteration (_tmp44_, TRUE);
#line 1177 "download.c"
		}
	}
#line 136 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp45_ = _data1_->download;
#line 136 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp46_ = webkit_download_get_status (_tmp45_);
#line 136 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp47_ = _tmp46_;
#line 136 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_vala_assert (_tmp47_ == WEBKIT_DOWNLOAD_STATUS_FINISHED, "download.status == WebKit.DownloadStatus.FINISHED");
#line 142 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp48_ = not_found_url;
#line 142 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp49_ = webkit_network_request_new (_tmp48_);
#line 142 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp50_ = _tmp49_;
#line 142 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp51_ = webkit_download_new (_tmp50_);
#line 142 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_object_unref0 (_data1_->download);
#line 142 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_data1_->download = _tmp51_;
#line 142 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_object_unref0 (_tmp50_);
#line 147 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp52_ = _data1_->download;
#line 147 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	webkit_download_set_destination_uri (_tmp52_, uri);
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp53_ = _data1_->download;
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	webkit_download_start (_tmp53_);
#line 1210 "download.c"
	{
		gboolean _tmp54_ = FALSE;
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		_tmp54_ = TRUE;
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
		while (TRUE) {
#line 1217 "download.c"
			GMainContext* _tmp56_;
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			if (!_tmp54_) {
#line 1221 "download.c"
				WebKitDownload* _tmp55_;
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				_tmp55_ = _data1_->download;
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
				if (!(!midori_download_is_finished (_tmp55_))) {
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
					break;
#line 1229 "download.c"
				}
			}
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			_tmp54_ = FALSE;
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			_tmp56_ = loop;
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
			g_main_context_iteration (_tmp56_, TRUE);
#line 1238 "download.c"
		}
	}
#line 152 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp57_ = _data1_->download;
#line 152 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp58_ = webkit_download_get_status (_tmp57_);
#line 152 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_tmp59_ = _tmp58_;
#line 152 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_vala_assert (_tmp59_ == WEBKIT_DOWNLOAD_STATUS_ERROR, "download.status == WebKit.DownloadStatus.ERROR");
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_main_context_unref0 (loop);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (tee);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (uri);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (not_found_url);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (was_found_url);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_free0 (test_url);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_g_object_unref0 (test_server);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	block1_data_unref (_data1_);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_data1_ = NULL;
#line 1267 "download.c"
}


static void
_download_suggestion_gtest_func (void)
{
#line 160 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	download_suggestion ();
#line 1276 "download.c"
}


static void
_download_extension_gtest_func (void)
{
#line 161 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	download_extension ();
#line 1285 "download.c"
}


static void
_download_unique_gtest_func (void)
{
#line 162 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	download_unique ();
#line 1294 "download.c"
}


static void
_download_properties_gtest_func (void)
{
#line 163 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	download_properties ();
#line 1303 "download.c"
}


void
_vala_main (gchar** args,
            int args_length1)
{
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_test_init (&args_length1, &args, NULL);
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	midori_app_setup (&args_length1, &args, NULL);
#line 159 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	midori_paths_init (MIDORI_RUNTIME_MODE_NORMAL, NULL);
#line 160 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_test_add_func ("/download/suggestion", _download_suggestion_gtest_func);
#line 161 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_test_add_func ("/download/extension", _download_extension_gtest_func);
#line 162 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_test_add_func ("/download/unique", _download_unique_gtest_func);
#line 163 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_test_add_func ("/download/properties", _download_properties_gtest_func);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	g_test_run ();
#line 1327 "download.c"
}


int
main (int argc,
      char ** argv)
{
#line 156 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	_vala_main (argv, argc);
#line 156 "/home/midiba/Documents/glibc/pvd-aware-app/midori/tests/download.vala"
	return 0;
#line 1339 "download.c"
}



