/* midori-download.c generated by valac 0.40.4, the Vala compiler
 * generated from midori-download.vala, do not modify */

/*
 Copyright (C) 2012-2013 Christian Dywan <christian@twotoasts.de>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.

 See the file COPYING for the full license text.
*/


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include "webkit/webkit.h"
#include <float.h>
#include <math.h>
#include <glib/gi18n-lib.h>
#include <gio/gio.h>
#include <glib/gstdio.h>

#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define MIDORI_TYPE_TAB (midori_tab_get_type ())
#define MIDORI_TAB(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_TAB, MidoriTab))
#define MIDORI_TAB_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_TAB, MidoriTabClass))
#define MIDORI_IS_TAB(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_TAB))
#define MIDORI_IS_TAB_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_TAB))
#define MIDORI_TAB_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_TAB, MidoriTabClass))

typedef struct _MidoriTab MidoriTab;
typedef struct _MidoriTabClass MidoriTabClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))



gboolean sokoke_message_dialog (GtkMessageType type,
                                const gchar* _short_,
                                const gchar* detailed,
                                gboolean modal);
gboolean midori_download_is_finished (WebKitDownload* download);
gint midori_download_get_type (WebKitDownload* download);
void midori_download_set_type (WebKitDownload* download,
                               gint type);
gdouble midori_download_get_progress (WebKitDownload* download);
gchar* midori_download_calculate_tooltip (WebKitDownload* download);
gchar* midori_download_get_basename_for_display (const gchar* uri);
static guint64* _uint64_dup (guint64* self);
static gboolean _uint64_equal (const guint64 * s1,
                        const guint64 * s2);
gchar* midori_download_get_content_type (WebKitDownload* download,
                                         const gchar* mime_type);
gboolean midori_download_has_wrong_checksum (WebKitDownload* download);
GChecksumType midori_uri_get_fingerprint (const gchar* uri,
                                          gchar* * checksum,
                                          gchar* * label);
gboolean midori_download_action_clear (WebKitDownload* download,
                                       GtkWidget* widget,
                                       GError** error);
gboolean midori_download_open (WebKitDownload* download,
                               GtkWidget* widget,
                               GError** error);
gchar* midori_download_action_stock_id (WebKitDownload* download);
GType midori_tab_get_type (void) G_GNUC_CONST;
const gchar* midori_download_fallback_extension (const gchar* extension,
                                                 const gchar* mime_type);
gchar* midori_download_clean_filename (const gchar* filename);
gchar* midori_download_get_suggested_filename (WebKitDownload* download);
gchar* midori_download_get_filename_suggestion_for_uri (const gchar* mime_type,
                                                        const gchar* uri);
gboolean midori_uri_is_location (const gchar* uri);
gchar* midori_download_get_extension_for_uri (const gchar* uri,
                                              gchar* * basename);
gchar* midori_download_get_unique_filename (const gchar* filename);
gchar* midori_download_prepare_destination_uri (WebKitDownload* download,
                                                const gchar* folder);
const gchar* midori_paths_get_tmp_dir (void);
gchar* katze_mkdir_with_parents (const gchar* pathname,
                                 gint mode);
gboolean midori_download_has_enough_space (WebKitDownload* download,
                                           const gchar* destination_uri,
                                           gboolean quiet);


gboolean
midori_download_is_finished (WebKitDownload* download)
{
	gboolean result = FALSE;
	WebKitDownloadStatus _tmp0_;
	WebKitDownloadStatus _tmp1_;
#line 18 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, FALSE);
#line 20 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = webkit_download_get_status (download);
#line 20 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = _tmp0_;
#line 20 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	switch (_tmp1_) {
#line 20 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_FINISHED:
#line 20 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_CANCELLED:
#line 20 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_ERROR:
#line 113 "midori-download.c"
		{
#line 24 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = TRUE;
#line 24 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 119 "midori-download.c"
		}
		default:
		{
#line 26 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = FALSE;
#line 26 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 127 "midori-download.c"
		}
	}
}


gint
midori_download_get_type (WebKitDownload* download)
{
	gint result = 0;
	gconstpointer _tmp0_;
#line 35 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, 0);
#line 36 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = g_object_get_data ((GObject*) download, "midori-download-type");
#line 36 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = (gint) ((gintptr) _tmp0_);
#line 36 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 146 "midori-download.c"
}


void
midori_download_set_type (WebKitDownload* download,
                          gint type)
{
#line 39 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_if_fail (download != NULL);
#line 40 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_object_set_data_full ((GObject*) download, "midori-download-type", (gpointer) ((gintptr) type), NULL);
#line 158 "midori-download.c"
}


gdouble
midori_download_get_progress (WebKitDownload* download)
{
	gdouble result = 0.0;
	WebKitDownloadStatus _tmp0_;
	WebKitDownloadStatus _tmp1_;
	gdouble _tmp2_;
	gdouble _tmp3_;
#line 51 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, 0.0);
#line 54 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = webkit_download_get_status (download);
#line 54 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = _tmp0_;
#line 54 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp1_ == WEBKIT_DOWNLOAD_STATUS_CREATED) {
#line 55 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = 0.0;
#line 55 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 182 "midori-download.c"
	}
#line 56 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp2_ = webkit_download_get_progress (download);
#line 56 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp3_ = _tmp2_;
#line 56 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = _tmp3_;
#line 56 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 192 "midori-download.c"
}


static guint64*
_uint64_dup (guint64* self)
{
	guint64* dup;
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	dup = g_new0 (guint64, 1);
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	memcpy (dup, self, sizeof (guint64));
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return dup;
#line 206 "midori-download.c"
}


static gpointer
__uint64_dup0 (gpointer self)
{
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return self ? _uint64_dup (self) : NULL;
#line 215 "midori-download.c"
}


static gboolean
_uint64_equal (const guint64 * s1,
               const guint64 * s2)
{
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (s1 == s2) {
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return TRUE;
#line 227 "midori-download.c"
	}
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (s1 == NULL) {
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return FALSE;
#line 233 "midori-download.c"
	}
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (s2 == NULL) {
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return FALSE;
#line 239 "midori-download.c"
	}
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return (*s1) == (*s2);
#line 243 "midori-download.c"
}


gchar*
midori_download_calculate_tooltip (WebKitDownload* download)
{
	gchar* result = NULL;
	gchar* filename = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* size = NULL;
	guint64 _tmp3_;
	guint64 _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	guint64 _tmp7_;
	guint64 _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	gchar* _tmp11_;
	gchar* _tmp12_;
	gboolean _tmp13_ = FALSE;
	guint64 total_size = 0ULL;
	guint64 _tmp19_;
	guint64 _tmp20_;
	guint64 current_size = 0ULL;
	guint64 _tmp21_;
	guint64 _tmp22_;
	gdouble elapsed = 0.0;
	gdouble diff = 0.0;
	gdouble _tmp23_;
	guint64 _tmp24_;
	gdouble estimated = 0.0;
	guint64 _tmp25_;
	guint64 _tmp26_;
	gdouble _tmp27_;
	gint hour = 0;
	gint minute = 0;
	gint hours = 0;
	gdouble _tmp28_;
	gint _tmp29_;
	gint minutes = 0;
	gdouble _tmp30_;
	gint _tmp31_;
	gint _tmp32_;
	gint _tmp33_;
	gint seconds = 0;
	gdouble _tmp34_;
	gint _tmp35_;
	gint _tmp36_;
	gint _tmp37_;
	gint _tmp38_;
	gchar* hours_ = NULL;
	gint _tmp39_;
	gint _tmp40_;
	gchar* _tmp41_;
	gchar* minutes_ = NULL;
	gint _tmp42_;
	gint _tmp43_;
	gchar* _tmp44_;
	gchar* seconds_ = NULL;
	gint _tmp45_;
	gint _tmp46_;
	gchar* _tmp47_;
	gdouble last_time = 0.0;
	gconstpointer _tmp48_;
	gchar* eta = NULL;
	gchar* _tmp49_;
	gdouble _tmp50_;
	gchar* speed = NULL;
	gchar* _tmp74_;
	guint64* last_size = NULL;
	gconstpointer _tmp75_;
	guint64* _tmp76_;
	gboolean _tmp77_ = FALSE;
	guint64* _tmp78_;
	const gchar* _tmp93_;
	gchar* _tmp94_;
	gdouble _tmp95_;
	gdouble _tmp96_;
	const gchar* _tmp100_;
	const gchar* _tmp101_;
	const gchar* _tmp102_;
	const gchar* _tmp103_;
	gchar* _tmp104_;
#line 62 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, NULL);
#line 64 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = webkit_download_get_destination_uri (download);
#line 64 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = _tmp0_;
#line 64 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp2_ = midori_download_get_basename_for_display (_tmp1_);
#line 64 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	filename = _tmp2_;
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp3_ = webkit_download_get_current_size (download);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp4_ = _tmp3_;
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp5_ = g_format_size_full (_tmp4_, G_FORMAT_SIZE_DEFAULT);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp6_ = _tmp5_;
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp7_ = webkit_download_get_total_size (download);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp8_ = _tmp7_;
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp9_ = g_format_size_full (_tmp8_, G_FORMAT_SIZE_DEFAULT);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp10_ = _tmp9_;
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp11_ = g_strdup_printf (_ ("%s of %s"), _tmp6_, _tmp10_);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp12_ = _tmp11_;
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (_tmp10_);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (_tmp6_);
#line 66 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	size = _tmp12_;
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (midori_download_is_finished (download)) {
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp13_ = TRUE;
#line 370 "midori-download.c"
	} else {
		WebKitDownloadStatus _tmp14_;
		WebKitDownloadStatus _tmp15_;
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp14_ = webkit_download_get_status (download);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp15_ = _tmp14_;
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp13_ = _tmp15_ == WEBKIT_DOWNLOAD_STATUS_CREATED;
#line 380 "midori-download.c"
	}
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp13_) {
#line 384 "midori-download.c"
		const gchar* _tmp16_;
		const gchar* _tmp17_;
		gchar* _tmp18_;
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp16_ = filename;
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp17_ = size;
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp18_ = g_strdup_printf ("%s\n%s", _tmp16_, _tmp17_);
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = _tmp18_;
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (size);
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (filename);
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 402 "midori-download.c"
	}
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp19_ = webkit_download_get_total_size (download);
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp20_ = _tmp19_;
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	total_size = _tmp20_;
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp21_ = webkit_download_get_current_size (download);
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp22_ = _tmp21_;
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	current_size = _tmp22_;
#line 75 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	elapsed = webkit_download_get_elapsed_time (download);
#line 76 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp23_ = elapsed;
#line 76 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp24_ = current_size;
#line 76 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	diff = _tmp23_ / _tmp24_;
#line 77 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp25_ = total_size;
#line 77 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp26_ = current_size;
#line 77 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp27_ = diff;
#line 77 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	estimated = (_tmp25_ - _tmp26_) * _tmp27_;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	hour = 3600;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	minute = 60;
#line 79 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp28_ = estimated;
#line 79 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp29_ = hour;
#line 79 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	hours = (gint) (_tmp28_ / _tmp29_);
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp30_ = estimated;
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp31_ = hours;
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp32_ = hour;
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp33_ = minute;
#line 80 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	minutes = (gint) ((_tmp30_ - (_tmp31_ * _tmp32_)) / _tmp33_);
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp34_ = estimated;
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp35_ = hours;
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp36_ = hour;
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp37_ = minutes;
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp38_ = minute;
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	seconds = (gint) ((_tmp34_ - (_tmp35_ * _tmp36_)) - (_tmp37_ * _tmp38_));
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp39_ = hours;
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp40_ = hours;
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp41_ = g_strdup_printf (ngettext ("%d hour", "%d hours", (gulong) _tmp39_), _tmp40_);
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	hours_ = _tmp41_;
#line 83 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp42_ = minutes;
#line 83 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp43_ = minutes;
#line 83 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp44_ = g_strdup_printf (ngettext ("%d minute", "%d minutes", (gulong) _tmp42_), _tmp43_);
#line 83 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	minutes_ = _tmp44_;
#line 84 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp45_ = seconds;
#line 84 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp46_ = seconds;
#line 84 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp47_ = g_strdup_printf (ngettext ("%d second", "%d seconds", (gulong) _tmp45_), _tmp46_);
#line 84 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	seconds_ = _tmp47_;
#line 85 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp48_ = g_object_get_data ((GObject*) download, "last-time");
#line 85 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	last_time = (gdouble) ((gint) ((gintptr) _tmp48_));
#line 87 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp49_ = g_strdup ("");
#line 87 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	eta = _tmp49_;
#line 88 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp50_ = estimated;
#line 88 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp50_ > ((gdouble) 0)) {
#line 500 "midori-download.c"
		gint _tmp51_;
		const gchar* _tmp71_;
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp51_ = hours;
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (_tmp51_ > 0) {
#line 507 "midori-download.c"
			const gchar* _tmp52_;
			gchar* _tmp53_;
			gchar* _tmp54_;
			const gchar* _tmp55_;
			gchar* _tmp56_;
#line 90 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp52_ = hours_;
#line 90 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp53_ = g_strconcat (_tmp52_, ", ", NULL);
#line 90 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp54_ = _tmp53_;
#line 90 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp55_ = minutes_;
#line 90 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp56_ = g_strconcat (_tmp54_, _tmp55_, NULL);
#line 90 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (eta);
#line 90 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			eta = _tmp56_;
#line 90 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (_tmp54_);
#line 529 "midori-download.c"
		} else {
			gint _tmp57_;
#line 91 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp57_ = minutes;
#line 91 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			if (_tmp57_ >= 10) {
#line 536 "midori-download.c"
				const gchar* _tmp58_;
				gchar* _tmp59_;
#line 92 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp58_ = minutes_;
#line 92 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp59_ = g_strdup (_tmp58_);
#line 92 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (eta);
#line 92 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				eta = _tmp59_;
#line 547 "midori-download.c"
			} else {
				gboolean _tmp60_ = FALSE;
				gint _tmp61_;
#line 93 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp61_ = minutes;
#line 93 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				if (_tmp61_ < 10) {
#line 555 "midori-download.c"
					gint _tmp62_;
#line 93 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp62_ = minutes;
#line 93 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp60_ = _tmp62_ > 0;
#line 561 "midori-download.c"
				} else {
#line 93 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp60_ = FALSE;
#line 565 "midori-download.c"
				}
#line 93 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				if (_tmp60_) {
#line 569 "midori-download.c"
					const gchar* _tmp63_;
					gchar* _tmp64_;
					gchar* _tmp65_;
					const gchar* _tmp66_;
					gchar* _tmp67_;
#line 94 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp63_ = minutes_;
#line 94 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp64_ = g_strconcat (_tmp63_, ", ", NULL);
#line 94 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp65_ = _tmp64_;
#line 94 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp66_ = seconds_;
#line 94 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp67_ = g_strconcat (_tmp65_, _tmp66_, NULL);
#line 94 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_g_free0 (eta);
#line 94 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					eta = _tmp67_;
#line 94 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_g_free0 (_tmp65_);
#line 591 "midori-download.c"
				} else {
					gint _tmp68_;
#line 95 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp68_ = seconds;
#line 95 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					if (_tmp68_ > 0) {
#line 598 "midori-download.c"
						const gchar* _tmp69_;
						gchar* _tmp70_;
#line 96 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
						_tmp69_ = seconds_;
#line 96 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
						_tmp70_ = g_strdup (_tmp69_);
#line 96 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
						_g_free0 (eta);
#line 96 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
						eta = _tmp70_;
#line 609 "midori-download.c"
					}
				}
			}
		}
#line 97 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp71_ = eta;
#line 97 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (g_strcmp0 (_tmp71_, "") != 0) {
#line 618 "midori-download.c"
			const gchar* _tmp72_;
			gchar* _tmp73_;
#line 99 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp72_ = eta;
#line 99 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp73_ = g_strdup_printf (_ (" - %s remaining"), _tmp72_);
#line 99 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (eta);
#line 99 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			eta = _tmp73_;
#line 629 "midori-download.c"
		}
	}
#line 102 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp74_ = g_strdup ("");
#line 102 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	speed = _tmp74_;
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp75_ = g_object_get_data ((GObject*) download, "last-size");
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp76_ = __uint64_dup0 ((guint64*) _tmp75_);
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	last_size = _tmp76_;
#line 104 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp78_ = last_size;
#line 104 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp78_ != NULL) {
#line 646 "midori-download.c"
		gdouble _tmp79_;
		gdouble _tmp80_;
#line 104 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp79_ = elapsed;
#line 104 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp80_ = last_time;
#line 104 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp77_ = _tmp79_ != _tmp80_;
#line 655 "midori-download.c"
	} else {
#line 104 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp77_ = FALSE;
#line 659 "midori-download.c"
	}
#line 104 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp77_) {
#line 663 "midori-download.c"
		guint64 _tmp81_;
		guint64* _tmp82_;
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp81_ = current_size;
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp82_ = last_size;
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (_uint64_equal (&_tmp81_, _tmp82_) != TRUE) {
#line 672 "midori-download.c"
			guint64 _tmp83_;
			guint64* _tmp84_;
			gdouble _tmp85_;
			gdouble _tmp86_;
			gchar* _tmp87_;
			const gchar* _tmp88_;
			gchar* _tmp89_;
#line 106 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp83_ = current_size;
#line 106 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp84_ = last_size;
#line 106 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp85_ = elapsed;
#line 106 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp86_ = last_time;
#line 106 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp87_ = g_format_size_full ((guint64) ((_tmp83_ - (*_tmp84_)) / (_tmp85_ - _tmp86_)), G_FORMAT_SIZE_DEFAULT);
#line 106 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (speed);
#line 106 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			speed = _tmp87_;
#line 108 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp88_ = speed;
#line 108 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp89_ = g_strdup (_tmp88_);
#line 108 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			g_object_set_data_full ((GObject*) download, "last-speed", _tmp89_, g_free);
#line 700 "midori-download.c"
		} else {
			gconstpointer _tmp90_;
			gchar* _tmp91_;
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp90_ = g_object_get_data ((GObject*) download, "last-speed");
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp91_ = g_strdup ((const gchar*) _tmp90_);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (speed);
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			speed = _tmp91_;
#line 712 "midori-download.c"
		}
	} else {
		gchar* _tmp92_;
#line 116 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp92_ = g_strdup (_ ("?B"));
#line 116 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (speed);
#line 116 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		speed = _tmp92_;
#line 722 "midori-download.c"
	}
#line 118 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp93_ = speed;
#line 118 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp94_ = g_strdup_printf (_ (" (%s/s)"), _tmp93_);
#line 118 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (speed);
#line 118 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	speed = _tmp94_;
#line 120 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp95_ = elapsed;
#line 120 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp96_ = last_time;
#line 120 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if ((_tmp95_ - _tmp96_) > 0.0) {
#line 738 "midori-download.c"
		gdouble _tmp97_;
		guint64 _tmp98_;
		guint64* _tmp99_;
#line 121 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp97_ = elapsed;
#line 121 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		g_object_set_data_full ((GObject*) download, "last-time", (gpointer) ((gintptr) ((gint) _tmp97_)), NULL);
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp98_ = current_size;
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp99_ = __uint64_dup0 (&_tmp98_);
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		g_object_set_data_full ((GObject*) download, "last-size", _tmp99_, g_free);
#line 752 "midori-download.c"
	}
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp100_ = filename;
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp101_ = size;
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp102_ = speed;
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp103_ = eta;
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp104_ = g_strdup_printf ("%s\n%s %s%s", _tmp100_, _tmp101_, _tmp102_, _tmp103_);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = _tmp104_;
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (last_size);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (speed);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (eta);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (seconds_);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (minutes_);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (hours_);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (size);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (filename);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 784 "midori-download.c"
}


gchar*
midori_download_get_content_type (WebKitDownload* download,
                                  const gchar* mime_type)
{
	gchar* result = NULL;
	gchar* content_type = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	const gchar* _tmp3_;
#line 140 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, NULL);
#line 146 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = webkit_download_get_suggested_filename (download);
#line 146 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = _tmp0_;
#line 146 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp2_ = g_content_type_guess (_tmp1_, NULL, (gsize) 0, NULL);
#line 146 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	content_type = _tmp2_;
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp3_ = content_type;
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp3_ == NULL) {
#line 812 "midori-download.c"
		gchar* _tmp4_;
		const gchar* _tmp5_;
#line 149 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp4_ = g_content_type_from_mime_type (mime_type);
#line 149 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (content_type);
#line 149 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		content_type = _tmp4_;
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp5_ = content_type;
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (_tmp5_ == NULL) {
#line 825 "midori-download.c"
			gchar* _tmp6_;
#line 151 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp6_ = g_content_type_from_mime_type ("application/octet-stream");
#line 151 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (content_type);
#line 151 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			content_type = _tmp6_;
#line 833 "midori-download.c"
		}
	}
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = content_type;
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 840 "midori-download.c"
}


gboolean
midori_download_has_wrong_checksum (WebKitDownload* download)
{
	gboolean result = FALSE;
	gint status = 0;
	gconstpointer _tmp0_;
	gint _tmp1_;
	gint _tmp30_;
	GError * _inner_error_ = NULL;
#line 156 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, FALSE);
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = g_object_get_data ((GObject*) download, "checksum-status");
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	status = (gint) ((gintptr) _tmp0_);
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = status;
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp1_ == 0) {
#line 863 "midori-download.c"
		gchar* original_uri = NULL;
		WebKitNetworkRequest* _tmp2_;
		WebKitNetworkRequest* _tmp3_;
		gconstpointer _tmp4_;
		gchar* _tmp5_;
		const gchar* _tmp6_;
		gchar* fingerprint = NULL;
		GChecksumType checksum_type = 0;
		const gchar* _tmp9_;
		gchar* _tmp10_ = NULL;
		GChecksumType _tmp11_;
		const gchar* _tmp12_;
		gint _tmp29_;
#line 163 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp2_ = webkit_download_get_network_request (download);
#line 163 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp3_ = _tmp2_;
#line 163 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp4_ = g_object_get_data ((GObject*) _tmp3_, "midori-original-uri");
#line 163 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp5_ = g_strdup ((const gchar*) _tmp4_);
#line 163 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		original_uri = _tmp5_;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp6_ = original_uri;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (_tmp6_ == NULL) {
#line 891 "midori-download.c"
			const gchar* _tmp7_;
			gchar* _tmp8_;
#line 165 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp7_ = webkit_download_get_uri (download);
#line 165 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp8_ = g_strdup (_tmp7_);
#line 165 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (original_uri);
#line 165 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			original_uri = _tmp8_;
#line 902 "midori-download.c"
		}
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp9_ = original_uri;
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp11_ = midori_uri_get_fingerprint (_tmp9_, &_tmp10_, NULL);
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (fingerprint);
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		fingerprint = _tmp10_;
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		checksum_type = _tmp11_;
#line 170 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		status = 2;
#line 171 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp12_ = fingerprint;
#line 171 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (_tmp12_ != NULL) {
#line 920 "midori-download.c"
			{
				gchar* filename = NULL;
				const gchar* _tmp13_;
				const gchar* _tmp14_;
				gchar* _tmp15_;
				gchar* contents = NULL;
				gsize length = 0UL;
				gboolean y = FALSE;
				const gchar* _tmp16_;
				gchar* _tmp17_ = NULL;
				gsize _tmp18_ = 0UL;
				gboolean _tmp19_;
				gchar* checksum = NULL;
				GChecksumType _tmp20_;
				const gchar* _tmp21_;
				gsize _tmp22_;
				gchar* _tmp23_;
				gboolean _tmp24_ = FALSE;
				gboolean _tmp25_;
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp13_ = webkit_download_get_destination_uri (download);
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp14_ = _tmp13_;
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp15_ = g_filename_from_uri (_tmp14_, NULL, &_inner_error_);
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				filename = _tmp15_;
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 950 "midori-download.c"
					goto __catch16_g_error;
				}
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp16_ = filename;
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp19_ = g_file_get_contents (_tmp16_, &_tmp17_, &_tmp18_, &_inner_error_);
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (contents);
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				contents = _tmp17_;
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				length = _tmp18_;
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				y = _tmp19_;
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_g_free0 (contents);
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_g_free0 (filename);
#line 971 "midori-download.c"
					goto __catch16_g_error;
				}
#line 181 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp20_ = checksum_type;
#line 181 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp21_ = contents;
#line 181 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp22_ = length;
#line 181 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp23_ = g_compute_checksum_for_string (_tmp20_, _tmp21_, _tmp22_);
#line 181 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				checksum = _tmp23_;
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp25_ = y;
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				if (!_tmp25_) {
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp24_ = TRUE;
#line 990 "midori-download.c"
				} else {
					const gchar* _tmp26_;
					const gchar* _tmp27_;
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp26_ = fingerprint;
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp27_ = checksum;
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp24_ = g_ascii_strcasecmp (_tmp26_, _tmp27_) != 0;
#line 1000 "midori-download.c"
				}
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				if (_tmp24_) {
#line 184 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					status = 1;
#line 1006 "midori-download.c"
				}
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (checksum);
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (contents);
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (filename);
#line 1014 "midori-download.c"
			}
			goto __finally16;
			__catch16_g_error:
			{
				GError* _error_ = NULL;
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_error_ = _inner_error_;
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_inner_error_ = NULL;
#line 187 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				status = 1;
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_error_free0 (_error_);
#line 1028 "midori-download.c"
			}
			__finally16:
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1033 "midori-download.c"
				gboolean _tmp28_ = FALSE;
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (fingerprint);
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (original_uri);
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				g_clear_error (&_inner_error_);
#line 172 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				return _tmp28_;
#line 1045 "midori-download.c"
			}
		}
#line 190 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp29_ = status;
#line 190 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		g_object_set_data_full ((GObject*) download, "checksum-status", (gpointer) ((gintptr) _tmp29_), NULL);
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (fingerprint);
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (original_uri);
#line 1056 "midori-download.c"
	}
#line 192 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp30_ = status;
#line 192 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = _tmp30_ == 1;
#line 192 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 1064 "midori-download.c"
}


gboolean
midori_download_action_clear (WebKitDownload* download,
                              GtkWidget* widget,
                              GError** error)
{
	gboolean result = FALSE;
	WebKitDownloadStatus _tmp0_;
	WebKitDownloadStatus _tmp1_;
	GError * _inner_error_ = NULL;
#line 196 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, FALSE);
#line 196 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (widget != NULL, FALSE);
#line 198 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = webkit_download_get_status (download);
#line 198 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = _tmp0_;
#line 198 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	switch (_tmp1_) {
#line 198 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_CREATED:
#line 198 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_STARTED:
#line 1091 "midori-download.c"
		{
#line 201 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			webkit_download_cancel (download);
#line 202 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			break;
#line 1097 "midori-download.c"
		}
#line 198 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_FINISHED:
#line 1101 "midori-download.c"
		{
			gboolean _tmp2_ = FALSE;
#line 204 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp2_ = midori_download_open (download, widget, &_inner_error_);
#line 204 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1108 "midori-download.c"
				gboolean _tmp3_ = FALSE;
#line 204 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				g_propagate_error (error, _inner_error_);
#line 204 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				return _tmp3_;
#line 1114 "midori-download.c"
			}
#line 204 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			if (_tmp2_) {
#line 205 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				result = TRUE;
#line 205 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				return result;
#line 1122 "midori-download.c"
			}
#line 206 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			break;
#line 1126 "midori-download.c"
		}
#line 198 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_CANCELLED:
#line 1130 "midori-download.c"
		{
#line 208 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = TRUE;
#line 208 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 1136 "midori-download.c"
		}
		default:
		{
			WebKitDownloadStatus _tmp4_;
			WebKitDownloadStatus _tmp5_;
#line 210 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp4_ = webkit_download_get_status (download);
#line 210 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp5_ = _tmp4_;
#line 210 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			g_critical ("midori-download.vala:210: action_clear: %d", (gint) _tmp5_);
#line 211 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			g_warn_if_reached ();
#line 212 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			break;
#line 1152 "midori-download.c"
		}
	}
#line 223 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = FALSE;
#line 223 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 1159 "midori-download.c"
}


gchar*
midori_download_action_stock_id (WebKitDownload* download)
{
	gchar* result = NULL;
	WebKitDownloadStatus _tmp0_;
	WebKitDownloadStatus _tmp1_;
#line 226 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, NULL);
#line 228 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = webkit_download_get_status (download);
#line 228 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = _tmp0_;
#line 228 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	switch (_tmp1_) {
#line 228 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_CREATED:
#line 228 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_STARTED:
#line 1181 "midori-download.c"
		{
			gchar* _tmp2_;
#line 231 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp2_ = g_strdup (GTK_STOCK_CANCEL);
#line 231 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = _tmp2_;
#line 231 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 1190 "midori-download.c"
		}
#line 228 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_FINISHED:
#line 1194 "midori-download.c"
		{
			gchar* _tmp4_;
#line 233 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			if (midori_download_has_wrong_checksum (download)) {
#line 1199 "midori-download.c"
				gchar* _tmp3_;
#line 234 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp3_ = g_strdup (GTK_STOCK_DIALOG_WARNING);
#line 234 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				result = _tmp3_;
#line 234 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				return result;
#line 1207 "midori-download.c"
			}
#line 235 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp4_ = g_strdup (GTK_STOCK_OPEN);
#line 235 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = _tmp4_;
#line 235 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 1215 "midori-download.c"
		}
#line 228 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_CANCELLED:
#line 1219 "midori-download.c"
		{
			gchar* _tmp5_;
#line 237 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp5_ = g_strdup (GTK_STOCK_CLEAR);
#line 237 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = _tmp5_;
#line 237 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 1228 "midori-download.c"
		}
#line 228 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		case WEBKIT_DOWNLOAD_STATUS_ERROR:
#line 1232 "midori-download.c"
		{
			gchar* _tmp6_;
#line 239 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp6_ = g_strdup (GTK_STOCK_DIALOG_ERROR);
#line 239 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = _tmp6_;
#line 239 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 1241 "midori-download.c"
		}
		default:
		{
			WebKitDownloadStatus _tmp7_;
			WebKitDownloadStatus _tmp8_;
			gchar* _tmp9_;
#line 241 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp7_ = webkit_download_get_status (download);
#line 241 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp8_ = _tmp7_;
#line 241 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			g_critical ("midori-download.vala:241: action_stock_id: %d", (gint) _tmp8_);
#line 242 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			g_warn_if_reached ();
#line 243 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp9_ = g_strdup (GTK_STOCK_MISSING_IMAGE);
#line 243 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = _tmp9_;
#line 243 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 1262 "midori-download.c"
		}
	}
}


static gpointer
_g_object_ref0 (gpointer self)
{
#line 264 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return self ? g_object_ref (self) : NULL;
#line 1273 "midori-download.c"
}


gboolean
midori_download_open (WebKitDownload* download,
                      GtkWidget* widget,
                      GError** error)
{
	gboolean result = FALSE;
#line 256 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, FALSE);
#line 256 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (widget != NULL, FALSE);
#line 257 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (midori_download_has_wrong_checksum (download)) {
#line 258 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		sokoke_message_dialog (GTK_MESSAGE_WARNING, _ ("The downloaded file is erroneous."), _ ("The checksum provided with the link did not match. This means the file" \
" is probably incomplete or was modified afterwards."), TRUE);
#line 262 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = TRUE;
#line 262 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1295 "midori-download.c"
	} else {
		GtkWidget* browser = NULL;
		GtkWidget* _tmp0_;
		GtkWidget* _tmp1_;
		MidoriTab* tab = NULL;
		GtkWidget* _tmp2_;
		MidoriTab* _tmp3_;
#line 264 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp0_ = gtk_widget_get_toplevel (widget);
#line 264 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp1_ = _g_object_ref0 (_tmp0_);
#line 264 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		browser = _tmp1_;
#line 265 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		tab = NULL;
#line 266 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp2_ = browser;
#line 266 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		g_object_get ((GObject*) _tmp2_, "tab", &tab, NULL);
#line 267 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp3_ = tab;
#line 267 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (_tmp3_ != NULL) {
#line 1319 "midori-download.c"
			MidoriTab* _tmp4_;
			const gchar* _tmp5_;
			const gchar* _tmp6_;
			gboolean _tmp7_ = FALSE;
#line 271 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp4_ = tab;
#line 271 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp5_ = webkit_download_get_destination_uri (download);
#line 271 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp6_ = _tmp5_;
#line 271 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			g_signal_emit_by_name (_tmp4_, "open-uri", _tmp6_, &_tmp7_);
#line 271 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = _tmp7_;
#line 271 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_object_unref0 (tab);
#line 271 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_object_unref0 (browser);
#line 271 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 1340 "midori-download.c"
		}
#line 257 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_object_unref0 (tab);
#line 257 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_object_unref0 (browser);
#line 1346 "midori-download.c"
	}
#line 274 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = FALSE;
#line 274 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 1352 "midori-download.c"
}


static gchar
string_get (const gchar* self,
            glong index)
{
	gchar result = '\0';
	gchar _tmp0_;
#line 1124 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, '\0');
#line 1125 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = ((gchar*) self)[index];
#line 1125 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp0_;
#line 1125 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1370 "midori-download.c"
}


static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gboolean result = FALSE;
	gchar* _tmp0_;
#line 1417 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1417 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, FALSE);
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp0_ != NULL;
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1390 "midori-download.c"
}


const gchar*
midori_download_fallback_extension (const gchar* extension,
                                    const gchar* mime_type)
{
	const gchar* result = NULL;
	gboolean _tmp0_ = FALSE;
#line 277 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (mime_type != NULL, NULL);
#line 278 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (extension != NULL) {
#line 278 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp0_ = string_get (extension, (glong) 0) != '\0';
#line 1406 "midori-download.c"
	} else {
#line 278 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp0_ = FALSE;
#line 1410 "midori-download.c"
	}
#line 278 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp0_) {
#line 279 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = extension;
#line 279 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1418 "midori-download.c"
	}
#line 280 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (string_contains (mime_type, "css")) {
#line 281 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = ".css";
#line 281 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1426 "midori-download.c"
	}
#line 282 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (string_contains (mime_type, "javascript")) {
#line 283 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = ".js";
#line 283 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1434 "midori-download.c"
	}
#line 284 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (string_contains (mime_type, "html")) {
#line 285 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = ".htm";
#line 285 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1442 "midori-download.c"
	}
#line 286 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (string_contains (mime_type, "plain")) {
#line 287 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = ".txt";
#line 287 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1450 "midori-download.c"
	}
#line 288 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = "";
#line 288 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 1456 "midori-download.c"
}


static gchar*
string_delimit (const gchar* self,
                const gchar* delimiters,
                gchar new_delimiter)
{
	gchar* result = NULL;
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	const gchar* _tmp1_;
#line 1256 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1256 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (delimiters != NULL, NULL);
#line 1257 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = g_strdup (self);
#line 1257 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_result_ = _tmp0_;
#line 1258 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = _result_;
#line 1258 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_strdelimit (_tmp1_, delimiters, new_delimiter);
#line 1259 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _result_;
#line 1259 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1485 "midori-download.c"
}


gchar*
midori_download_clean_filename (const gchar* filename)
{
	gchar* result = NULL;
	gchar* _tmp0_;
#line 291 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (filename != NULL, NULL);
#line 295 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = string_delimit (filename, "/ ", '_');
#line 295 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = _tmp0_;
#line 295 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 1502 "midori-download.c"
}


gchar*
midori_download_get_suggested_filename (WebKitDownload* download)
{
	gchar* result = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
#line 299 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, NULL);
#line 303 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = webkit_download_get_suggested_filename (download);
#line 303 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = midori_download_clean_filename (_tmp0_);
#line 303 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = _tmp1_;
#line 303 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 1522 "midori-download.c"
}


/**
         * Returns a filename of the form "name.ext" to use as a suggested name for
         * a download of the given uri
         */
static gint
string_index_of_char (const gchar* self,
                      gunichar c,
                      gint start_index)
{
	gint result = 0;
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
#line 1045 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, 0);
#line 1046 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = g_utf8_strchr (((gchar*) self) + start_index, (gssize) -1, c);
#line 1046 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_result_ = _tmp0_;
#line 1048 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = _result_;
#line 1048 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp1_ != NULL) {
#line 1549 "midori-download.c"
		gchar* _tmp2_;
#line 1049 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = _result_;
#line 1049 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = (gint) (_tmp2_ - ((gchar*) self));
#line 1049 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1557 "midori-download.c"
	} else {
#line 1051 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = -1;
#line 1051 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1563 "midori-download.c"
	}
}


gchar*
midori_download_get_filename_suggestion_for_uri (const gchar* mime_type,
                                                 const gchar* uri)
{
	gchar* result = NULL;
	gchar* filename = NULL;
	GFile* _tmp0_;
	GFile* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
#line 316 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (mime_type != NULL, NULL);
#line 316 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (uri != NULL, NULL);
#line 317 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (midori_uri_is_location (uri), uri);
#line 318 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = g_file_new_for_uri (uri);
#line 318 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = _tmp0_;
#line 318 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp2_ = g_file_get_basename (_tmp1_);
#line 318 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp3_ = _tmp2_;
#line 318 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_object_unref0 (_tmp1_);
#line 318 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	filename = _tmp3_;
#line 319 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (string_index_of_char (uri, (gunichar) '.', 0) == -1) {
#line 1598 "midori-download.c"
		const gchar* _tmp4_;
		const gchar* _tmp5_;
		gchar* _tmp6_;
#line 320 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp4_ = filename;
#line 320 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp5_ = midori_download_fallback_extension (NULL, mime_type);
#line 320 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp6_ = g_build_filename (_tmp4_, _tmp5_, NULL);
#line 320 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = _tmp6_;
#line 320 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (filename);
#line 320 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1614 "midori-download.c"
	}
#line 321 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = filename;
#line 321 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 1620 "midori-download.c"
}


static gint
string_last_index_of_char (const gchar* self,
                           gunichar c,
                           gint start_index)
{
	gint result = 0;
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
#line 1055 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, 0);
#line 1056 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = g_utf8_strrchr (((gchar*) self) + start_index, (gssize) -1, c);
#line 1056 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_result_ = _tmp0_;
#line 1058 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = _result_;
#line 1058 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp1_ != NULL) {
#line 1643 "midori-download.c"
		gchar* _tmp2_;
#line 1059 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = _result_;
#line 1059 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = (gint) (_tmp2_ - ((gchar*) self));
#line 1059 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1651 "midori-download.c"
	} else {
#line 1061 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = -1;
#line 1061 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1657 "midori-download.c"
	}
}


static glong
string_strnlen (gchar* str,
                glong maxlen)
{
	glong result = 0L;
	gchar* end = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
#line 1336 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = memchr (str, 0, (gsize) maxlen);
#line 1336 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	end = _tmp0_;
#line 1337 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = end;
#line 1337 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp1_ == NULL) {
#line 1338 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = maxlen;
#line 1338 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1682 "midori-download.c"
	} else {
		gchar* _tmp2_;
#line 1340 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = end;
#line 1340 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = (glong) (_tmp2_ - str);
#line 1340 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1691 "midori-download.c"
	}
}


static gchar*
string_substring (const gchar* self,
                  glong offset,
                  glong len)
{
	gchar* result = NULL;
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	glong _tmp6_;
	gchar* _tmp7_;
#line 1347 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1349 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (offset >= ((glong) 0)) {
#line 1349 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = len >= ((glong) 0);
#line 1712 "midori-download.c"
	} else {
#line 1349 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = FALSE;
#line 1716 "midori-download.c"
	}
#line 1349 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp0_) {
#line 1351 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		string_length = string_strnlen ((gchar*) self, offset + len);
#line 1722 "midori-download.c"
	} else {
		gint _tmp1_;
		gint _tmp2_;
#line 1353 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp1_ = strlen (self);
#line 1353 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = _tmp1_;
#line 1353 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		string_length = (glong) _tmp2_;
#line 1732 "midori-download.c"
	}
#line 1356 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (offset < ((glong) 0)) {
#line 1736 "midori-download.c"
		glong _tmp3_;
#line 1357 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp3_ = string_length;
#line 1357 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		offset = _tmp3_ + offset;
#line 1358 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_return_val_if_fail (offset >= ((glong) 0), NULL);
#line 1744 "midori-download.c"
	} else {
		glong _tmp4_;
#line 1360 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp4_ = string_length;
#line 1360 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_return_val_if_fail (offset <= _tmp4_, NULL);
#line 1751 "midori-download.c"
	}
#line 1362 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (len < ((glong) 0)) {
#line 1755 "midori-download.c"
		glong _tmp5_;
#line 1363 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp5_ = string_length;
#line 1363 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		len = _tmp5_ - offset;
#line 1761 "midori-download.c"
	}
#line 1365 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp6_ = string_length;
#line 1365 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail ((offset + len) <= _tmp6_, NULL);
#line 1366 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp7_ = g_strndup (((gchar*) self) + offset, (gsize) len);
#line 1366 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp7_;
#line 1366 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1773 "midori-download.c"
}


gchar*
midori_download_get_extension_for_uri (const gchar* uri,
                                       gchar* * basename)
{
	gchar* _vala_basename = NULL;
	gchar* result = NULL;
	gint last_slash = 0;
	gint _tmp0_;
	gint period = 0;
	gint _tmp1_;
	gint _tmp2_;
	gint query = 0;
	gint _tmp3_;
	gchar* extension = NULL;
	gint _tmp4_;
	gint _tmp5_;
	gint _tmp6_;
	gchar* _tmp7_;
	gint _tmp8_;
	gchar* _tmp9_;
#line 324 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (uri != NULL, NULL);
#line 325 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (_vala_basename);
#line 325 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_vala_basename = NULL;
#line 327 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	last_slash = string_last_index_of_char (uri, (gunichar) '/', 0);
#line 329 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = last_slash;
#line 329 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp0_ == -1) {
#line 330 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = NULL;
#line 330 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (basename) {
#line 330 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			*basename = _vala_basename;
#line 1815 "midori-download.c"
		} else {
#line 330 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (_vala_basename);
#line 1819 "midori-download.c"
		}
#line 330 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1823 "midori-download.c"
	}
#line 331 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = last_slash;
#line 331 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	period = string_last_index_of_char (uri, (gunichar) '.', _tmp1_);
#line 332 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp2_ = period;
#line 332 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp2_ == -1) {
#line 333 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = NULL;
#line 333 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (basename) {
#line 333 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			*basename = _vala_basename;
#line 1839 "midori-download.c"
		} else {
#line 333 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (_vala_basename);
#line 1843 "midori-download.c"
		}
#line 333 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1847 "midori-download.c"
	}
#line 335 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp3_ = period;
#line 335 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	query = string_last_index_of_char (uri, (gunichar) '?', _tmp3_);
#line 337 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp4_ = period;
#line 337 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp5_ = query;
#line 337 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp6_ = period;
#line 337 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp7_ = string_substring (uri, (glong) _tmp4_, (glong) (_tmp5_ - _tmp6_));
#line 337 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	extension = _tmp7_;
#line 338 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp8_ = period;
#line 338 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp9_ = string_substring (uri, (glong) 0, (glong) _tmp8_);
#line 338 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (_vala_basename);
#line 338 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_vala_basename = _tmp9_;
#line 339 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = extension;
#line 339 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (basename) {
#line 339 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		*basename = _vala_basename;
#line 1877 "midori-download.c"
	} else {
#line 339 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (_vala_basename);
#line 1881 "midori-download.c"
	}
#line 339 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 1885 "midori-download.c"
}


gchar*
midori_download_get_unique_filename (const gchar* filename)
{
	gchar* result = NULL;
	gchar* _tmp9_;
#line 343 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (filename != NULL, NULL);
#line 344 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (g_file_test (filename, G_FILE_TEST_EXISTS)) {
#line 1898 "midori-download.c"
		gchar* basename = NULL;
		gchar* extension = NULL;
		gchar* _tmp0_ = NULL;
		gchar* _tmp1_;
		gchar* new_filename = NULL;
		gint i = 0;
#line 346 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp1_ = midori_download_get_extension_for_uri (filename, &_tmp0_);
#line 346 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (basename);
#line 346 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		basename = _tmp0_;
#line 346 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		extension = _tmp1_;
#line 347 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		new_filename = NULL;
#line 348 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		i = 0;
#line 1917 "midori-download.c"
		{
			gboolean _tmp2_ = FALSE;
#line 349 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp2_ = TRUE;
#line 349 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			while (TRUE) {
#line 1924 "midori-download.c"
				const gchar* _tmp4_ = NULL;
				const gchar* _tmp5_;
				const gchar* _tmp6_;
				gint _tmp7_;
				gchar* _tmp8_;
#line 349 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				if (!_tmp2_) {
#line 1932 "midori-download.c"
					const gchar* _tmp3_;
#line 351 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp3_ = new_filename;
#line 351 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					if (!g_file_test (_tmp3_, G_FILE_TEST_EXISTS)) {
#line 351 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
						break;
#line 1940 "midori-download.c"
					}
				}
#line 349 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp2_ = FALSE;
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp5_ = extension;
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp4_ = _tmp5_;
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				if (_tmp4_ == NULL) {
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
					_tmp4_ = "";
#line 1953 "midori-download.c"
				}
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp6_ = basename;
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp7_ = i;
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				i = _tmp7_ + 1;
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp8_ = g_strdup_printf ("%s-%d%s", _tmp6_, _tmp7_, _tmp4_);
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (new_filename);
#line 350 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				new_filename = _tmp8_;
#line 1967 "midori-download.c"
			}
		}
#line 352 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = new_filename;
#line 352 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (extension);
#line 352 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (basename);
#line 352 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 1978 "midori-download.c"
	}
#line 354 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp9_ = g_strdup (filename);
#line 354 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = _tmp9_;
#line 354 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 1986 "midori-download.c"
}


/**
         * Returns a string showing a file:// URI's intended filename on
         * disk, suited for displaying to a user.
         * 
         * The string returned is the basename (final path segment) of the
         * filename of the uri. If the uri is invalid, not file://, or has no
         * basename, the uri itself is returned.
         * 
         * Since: 0.5.7
         **/
gchar*
midori_download_get_basename_for_display (const gchar* uri)
{
	gchar* result = NULL;
	gchar* _tmp6_;
	GError * _inner_error_ = NULL;
#line 367 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (uri != NULL, NULL);
#line 2008 "midori-download.c"
	{
		gchar* filename = NULL;
		gchar* _tmp0_;
		gboolean _tmp1_ = FALSE;
		const gchar* _tmp2_;
#line 369 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp0_ = g_filename_from_uri (uri, NULL, &_inner_error_);
#line 369 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		filename = _tmp0_;
#line 369 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 2020 "midori-download.c"
			goto __catch17_g_error;
		}
#line 370 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp2_ = filename;
#line 370 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (_tmp2_ != NULL) {
#line 2027 "midori-download.c"
			const gchar* _tmp3_;
#line 370 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp3_ = filename;
#line 370 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp1_ = g_strcmp0 (_tmp3_, "") != 0;
#line 2033 "midori-download.c"
		} else {
#line 370 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp1_ = FALSE;
#line 2037 "midori-download.c"
		}
#line 370 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (_tmp1_) {
#line 2041 "midori-download.c"
			const gchar* _tmp4_;
			gchar* _tmp5_;
#line 371 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp4_ = filename;
#line 371 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp5_ = g_path_get_basename (_tmp4_);
#line 371 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			result = _tmp5_;
#line 371 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (filename);
#line 371 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			return result;
#line 2054 "midori-download.c"
		}
#line 368 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (filename);
#line 2058 "midori-download.c"
	}
	goto __finally17;
	__catch17_g_error:
	{
		GError* _error_ = NULL;
#line 368 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_error_ = _inner_error_;
#line 368 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_inner_error_ = NULL;
#line 368 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_error_free0 (_error_);
#line 2070 "midori-download.c"
	}
	__finally17:
#line 368 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 368 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 368 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		g_clear_error (&_inner_error_);
#line 368 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return NULL;
#line 2081 "midori-download.c"
	}
#line 373 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp6_ = g_strdup (uri);
#line 373 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = _tmp6_;
#line 373 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 2089 "midori-download.c"
}


gchar*
midori_download_prepare_destination_uri (WebKitDownload* download,
                                         const gchar* folder)
{
	gchar* result = NULL;
	gchar* suggested_filename = NULL;
	gchar* _tmp0_;
	gchar* basename = NULL;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* download_dir = NULL;
	gchar* destination_filename = NULL;
	const gchar* _tmp9_;
	const gchar* _tmp10_;
	gchar* _tmp11_;
	GError * _inner_error_ = NULL;
#line 376 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, NULL);
#line 377 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = midori_download_get_suggested_filename (download);
#line 377 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	suggested_filename = _tmp0_;
#line 378 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = suggested_filename;
#line 378 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp2_ = g_path_get_basename (_tmp1_);
#line 378 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	basename = _tmp2_;
#line 380 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (folder == NULL) {
#line 2123 "midori-download.c"
		const gchar* _tmp3_;
		gchar* _tmp4_;
		const gchar* _tmp5_;
		gchar* _tmp6_;
		gchar* _tmp7_;
#line 381 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp3_ = midori_paths_get_tmp_dir ();
#line 381 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp4_ = g_strdup (_tmp3_);
#line 381 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (download_dir);
#line 381 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		download_dir = _tmp4_;
#line 382 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp5_ = download_dir;
#line 382 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp6_ = katze_mkdir_with_parents (_tmp5_, 0700);
#line 382 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp7_ = _tmp6_;
#line 382 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (_tmp7_);
#line 2145 "midori-download.c"
	} else {
		gchar* _tmp8_;
#line 385 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp8_ = g_strdup (folder);
#line 385 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (download_dir);
#line 385 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		download_dir = _tmp8_;
#line 2154 "midori-download.c"
	}
#line 386 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp9_ = download_dir;
#line 386 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp10_ = basename;
#line 386 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp11_ = g_build_filename (_tmp9_, _tmp10_, NULL);
#line 386 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	destination_filename = _tmp11_;
#line 2164 "midori-download.c"
	{
		gchar* _tmp12_ = NULL;
		gchar* _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
		gchar* _tmp16_;
		gchar* _tmp17_;
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp13_ = midori_download_get_unique_filename (destination_filename);
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp14_ = _tmp13_;
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp15_ = g_filename_to_uri (_tmp14_, NULL, &_inner_error_);
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp16_ = _tmp15_;
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (_tmp14_);
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp12_ = _tmp16_;
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 2186 "midori-download.c"
			goto __catch18_g_error;
		}
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp17_ = _tmp12_;
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp12_ = NULL;
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = _tmp17_;
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (_tmp12_);
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (destination_filename);
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (download_dir);
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (basename);
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (suggested_filename);
#line 388 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 2207 "midori-download.c"
	}
	goto __finally18;
	__catch18_g_error:
	{
		GError* _error_ = NULL;
		gchar* _tmp18_;
#line 387 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_error_ = _inner_error_;
#line 387 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_inner_error_ = NULL;
#line 391 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp18_ = g_strconcat ("file://", destination_filename, NULL);
#line 391 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = _tmp18_;
#line 391 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_error_free0 (_error_);
#line 391 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (destination_filename);
#line 391 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (download_dir);
#line 391 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (basename);
#line 391 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (suggested_filename);
#line 391 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 2234 "midori-download.c"
	}
	__finally18:
#line 387 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (destination_filename);
#line 387 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (download_dir);
#line 387 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (basename);
#line 387 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_free0 (suggested_filename);
#line 387 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 387 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_clear_error (&_inner_error_);
#line 387 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return NULL;
#line 2251 "midori-download.c"
}


/**
         * Returns whether it seems possible to save @download to the path specified by
         * @destination_uri, considering space on disk and permissions
         */
gboolean
midori_download_has_enough_space (WebKitDownload* download,
                                  const gchar* destination_uri,
                                  gboolean quiet)
{
	gboolean result = FALSE;
	GFile* folder = NULL;
	GFile* _tmp0_;
	GFile* _tmp1_;
	GFile* _tmp2_;
	GFile* _tmp3_;
	gboolean can_write = FALSE;
	guint64 free_space = 0ULL;
	gboolean _tmp13_ = FALSE;
	guint64 _tmp14_;
	guint64 _tmp15_;
	guint64 _tmp16_;
	GError * _inner_error_ = NULL;
#line 399 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (download != NULL, FALSE);
#line 399 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	g_return_val_if_fail (destination_uri != NULL, FALSE);
#line 401 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp0_ = g_file_new_for_uri (destination_uri);
#line 401 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp1_ = _tmp0_;
#line 401 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp2_ = g_file_get_parent (_tmp1_);
#line 401 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp3_ = _tmp2_;
#line 401 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_object_unref0 (_tmp1_);
#line 401 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	folder = _tmp3_;
#line 2293 "midori-download.c"
	{
		GFileInfo* info = NULL;
		GFile* _tmp4_;
		GFileInfo* _tmp5_;
		GFileInfo* _tmp6_;
		GFileInfo* _tmp7_ = NULL;
		GFile* _tmp8_;
		GFileInfo* _tmp9_;
		GFileInfo* _tmp10_;
		GFileInfo* _tmp11_;
#line 405 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp4_ = folder;
#line 405 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp5_ = g_file_query_filesystem_info (_tmp4_, "filesystem::free", NULL, &_inner_error_);
#line 405 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		info = _tmp5_;
#line 405 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 2312 "midori-download.c"
			goto __catch19_g_error;
		}
#line 406 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp6_ = info;
#line 406 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		free_space = g_file_info_get_attribute_uint64 (_tmp6_, "filesystem::free");
#line 407 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp8_ = folder;
#line 407 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp9_ = g_file_query_info (_tmp8_, "access::can-write", 0, NULL, &_inner_error_);
#line 407 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp7_ = _tmp9_;
#line 407 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 407 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_object_unref0 (info);
#line 2329 "midori-download.c"
			goto __catch19_g_error;
		}
#line 407 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp10_ = _tmp7_;
#line 407 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp7_ = NULL;
#line 407 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_object_unref0 (info);
#line 407 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		info = _tmp10_;
#line 408 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp11_ = info;
#line 408 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		can_write = g_file_info_get_attribute_boolean (_tmp11_, "access::can-write");
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_object_unref0 (_tmp7_);
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_object_unref0 (info);
#line 2348 "midori-download.c"
	}
	goto __finally19;
	__catch19_g_error:
	{
		GError* _error_ = NULL;
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_error_ = _inner_error_;
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_inner_error_ = NULL;
#line 411 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		can_write = FALSE;
#line 412 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		free_space = (guint64) 0;
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_error_free0 (_error_);
#line 2364 "midori-download.c"
	}
	__finally19:
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 2369 "midori-download.c"
		gboolean _tmp12_ = FALSE;
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_object_unref0 (folder);
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		g_clear_error (&_inner_error_);
#line 404 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return _tmp12_;
#line 2379 "midori-download.c"
	}
#line 415 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp14_ = free_space;
#line 415 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp15_ = webkit_download_get_total_size (download);
#line 415 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_tmp16_ = _tmp15_;
#line 415 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp14_ < _tmp16_) {
#line 415 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp13_ = TRUE;
#line 2391 "midori-download.c"
	} else {
		gboolean _tmp17_;
#line 415 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp17_ = can_write;
#line 415 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp13_ = !_tmp17_;
#line 2398 "midori-download.c"
	}
#line 415 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	if (_tmp13_) {
#line 2402 "midori-download.c"
		gchar* message = NULL;
		gchar* detailed_message = NULL;
		gboolean _tmp18_;
#line 418 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_tmp18_ = can_write;
#line 418 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (!_tmp18_) {
#line 2410 "midori-download.c"
			gchar* _tmp19_;
			gchar* _tmp20_;
			gchar* _tmp21_;
			gchar* _tmp22_;
#line 419 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp19_ = midori_download_get_basename_for_display (destination_uri);
#line 419 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp20_ = _tmp19_;
#line 419 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp21_ = g_strdup_printf (_ ("The file \"%s\" can't be saved in this folder."), _tmp20_);
#line 419 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (message);
#line 419 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			message = _tmp21_;
#line 419 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (_tmp20_);
#line 421 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp22_ = g_strdup (_ ("You don't have permission to write in this location."));
#line 421 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_g_free0 (detailed_message);
#line 421 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			detailed_message = _tmp22_;
#line 2433 "midori-download.c"
		} else {
			guint64 _tmp23_;
			guint64 _tmp24_;
			guint64 _tmp25_;
#line 423 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp23_ = free_space;
#line 423 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp24_ = webkit_download_get_total_size (download);
#line 423 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp25_ = _tmp24_;
#line 423 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			if (_tmp23_ < _tmp25_) {
#line 2446 "midori-download.c"
				gchar* _tmp26_;
				gchar* _tmp27_;
				gchar* _tmp28_;
				guint64 _tmp29_;
				guint64 _tmp30_;
				gchar* _tmp31_;
				gchar* _tmp32_;
				guint64 _tmp33_;
				gchar* _tmp34_;
				gchar* _tmp35_;
				gchar* _tmp36_;
#line 424 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp26_ = midori_download_get_basename_for_display (destination_uri);
#line 424 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp27_ = _tmp26_;
#line 424 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp28_ = g_strdup_printf (_ ("There is not enough free space to download \"%s\"."), _tmp27_);
#line 424 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (message);
#line 424 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				message = _tmp28_;
#line 424 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (_tmp27_);
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp29_ = webkit_download_get_total_size (download);
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp30_ = _tmp29_;
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp31_ = g_format_size_full (_tmp30_, G_FORMAT_SIZE_DEFAULT);
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp32_ = _tmp31_;
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp33_ = free_space;
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp34_ = g_format_size_full (_tmp33_, G_FORMAT_SIZE_DEFAULT);
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp35_ = _tmp34_;
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_tmp36_ = g_strdup_printf (_ ("The file needs %s but only %s are left."), _tmp32_, _tmp35_);
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (detailed_message);
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				detailed_message = _tmp36_;
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (_tmp35_);
#line 426 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				_g_free0 (_tmp32_);
#line 2494 "midori-download.c"
			} else {
#line 430 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
				g_assert_not_reached ();
#line 2498 "midori-download.c"
			}
		}
#line 431 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		if (!quiet) {
#line 2503 "midori-download.c"
			const gchar* _tmp37_;
			const gchar* _tmp38_;
#line 432 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp37_ = message;
#line 432 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			_tmp38_ = detailed_message;
#line 432 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
			sokoke_message_dialog (GTK_MESSAGE_ERROR, _tmp37_, _tmp38_, FALSE);
#line 2512 "midori-download.c"
		}
#line 433 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		result = FALSE;
#line 433 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (detailed_message);
#line 433 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_free0 (message);
#line 433 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		_g_object_unref0 (folder);
#line 433 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
		return result;
#line 2524 "midori-download.c"
	}
#line 436 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	result = TRUE;
#line 436 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	_g_object_unref0 (folder);
#line 436 "/home/midiba/Documents/glibc/pvd-aware-app/midori/midori/midori-download.vala"
	return result;
#line 2532 "midori-download.c"
}



