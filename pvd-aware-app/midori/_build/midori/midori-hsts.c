/* midori-hsts.c generated by valac 0.40.4, the Vala compiler
 * generated from midori-hsts.vala, do not modify */

/*
 Copyright (C) 2012 Christian Dywan <christian@twotoasts.de>

 This library is free software; you can redistribute it and/or
 modify it under the terms of the GNU Lesser General Public
 License as published by the Free Software Foundation; either
 version 2.1 of the License, or (at your option) any later version.

 See the file COPYING for the full license text.
*/


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <libsoup/soup.h>
#include <gio/gio.h>
#include <stdio.h>
#include <gobject/gvaluecollector.h>


#define MIDORI_TYPE_HSTS (midori_hsts_get_type ())
#define MIDORI_HSTS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_TYPE_HSTS, MidoriHSTS))
#define MIDORI_HSTS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_TYPE_HSTS, MidoriHSTSClass))
#define MIDORI_IS_HSTS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_TYPE_HSTS))
#define MIDORI_IS_HSTS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_TYPE_HSTS))
#define MIDORI_HSTS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_TYPE_HSTS, MidoriHSTSClass))

typedef struct _MidoriHSTS MidoriHSTS;
typedef struct _MidoriHSTSClass MidoriHSTSClass;
typedef struct _MidoriHSTSPrivate MidoriHSTSPrivate;

#define MIDORI_HSTS_TYPE_DIRECTIVE (midori_hsts_directive_get_type ())
#define MIDORI_HSTS_DIRECTIVE(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), MIDORI_HSTS_TYPE_DIRECTIVE, MidoriHSTSDirective))
#define MIDORI_HSTS_DIRECTIVE_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), MIDORI_HSTS_TYPE_DIRECTIVE, MidoriHSTSDirectiveClass))
#define MIDORI_HSTS_IS_DIRECTIVE(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), MIDORI_HSTS_TYPE_DIRECTIVE))
#define MIDORI_HSTS_IS_DIRECTIVE_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), MIDORI_HSTS_TYPE_DIRECTIVE))
#define MIDORI_HSTS_DIRECTIVE_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), MIDORI_HSTS_TYPE_DIRECTIVE, MidoriHSTSDirectiveClass))

typedef struct _MidoriHSTSDirective MidoriHSTSDirective;
typedef struct _MidoriHSTSDirectiveClass MidoriHSTSDirectiveClass;
enum  {
	MIDORI_HSTS_0_PROPERTY,
	MIDORI_HSTS_NUM_PROPERTIES
};
static GParamSpec* midori_hsts_properties[MIDORI_HSTS_NUM_PROPERTIES];
#define _g_hash_table_unref0(var) ((var == NULL) ? NULL : (var = (g_hash_table_unref (var), NULL)))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _midori_hsts_directive_unref0(var) ((var == NULL) ? NULL : (var = (midori_hsts_directive_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _MidoriHstsReadCacheData MidoriHstsReadCacheData;
typedef struct _MidoriHSTSDirectivePrivate MidoriHSTSDirectivePrivate;
#define _g_list_free0(var) ((var == NULL) ? NULL : (var = (g_list_free (var), NULL)))
typedef struct _MidoriHstsWhitelistSerializeData MidoriHstsWhitelistSerializeData;
#define __vala_SoupDate_free0(var) ((var == NULL) ? NULL : (var = (_vala_SoupDate_free (var), NULL)))
typedef struct _MidoriHSTSParamSpecDirective MidoriHSTSParamSpecDirective;

struct _MidoriHSTS {
	GObject parent_instance;
	MidoriHSTSPrivate * priv;
};

struct _MidoriHSTSClass {
	GObjectClass parent_class;
};

struct _MidoriHSTSPrivate {
	GHashTable* whitelist;
	gboolean debug;
};

struct _MidoriHstsReadCacheData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	MidoriHSTS* self;
	GFile* file;
	GFileInputStream* _tmp0_;
	GFileInputStream* _tmp1_;
	GDataInputStream* stream;
	GDataInputStream* _tmp2_;
	gchar* line;
	GDataInputStream* _tmp3_;
	gchar* _tmp4_;
	const gchar* _tmp5_;
	gchar** parts;
	const gchar* _tmp6_;
	gchar** _tmp7_;
	gchar** _tmp8_;
	gint parts_length1;
	gint _parts_size_;
	gboolean _tmp9_;
	gboolean _tmp10_;
	gchar** _tmp11_;
	gint _tmp11__length1;
	const gchar* _tmp12_;
	gchar** _tmp13_;
	gint _tmp13__length1;
	const gchar* _tmp14_;
	gchar** _tmp15_;
	gint _tmp15__length1;
	const gchar* _tmp16_;
	gchar* host;
	gchar** _tmp17_;
	gint _tmp17__length1;
	const gchar* _tmp18_;
	const gchar* _tmp19_;
	gchar* _tmp20_;
	gchar* expire;
	gchar** _tmp21_;
	gint _tmp21__length1;
	const gchar* _tmp22_;
	const gchar* _tmp23_;
	gchar* _tmp24_;
	gboolean allow_subdomains;
	gchar** _tmp25_;
	gint _tmp25__length1;
	const gchar* _tmp26_;
	const gchar* _tmp27_;
	MidoriHSTSDirective* directive;
	const gchar* _tmp28_;
	gboolean _tmp29_;
	MidoriHSTSDirective* _tmp30_;
	gboolean _tmp31_;
	MidoriHSTSDirective* _tmp32_;
	MidoriHSTSDirective* _tmp33_;
	gboolean _tmp34_;
	FILE* _tmp35_;
	const gchar* _tmp36_;
	const gchar* _tmp37_;
	MidoriHSTSDirective* _tmp38_;
	GError* _error_;
	GError * _inner_error_;
};

struct _MidoriHSTSDirective {
	GTypeInstance parent_instance;
	volatile int ref_count;
	MidoriHSTSDirectivePrivate * priv;
	SoupDate* expires;
	gboolean sub_domains;
};

struct _MidoriHSTSDirectiveClass {
	GTypeClass parent_class;
	void (*finalize) (MidoriHSTSDirective *self);
};

struct _MidoriHstsWhitelistSerializeData {
	int _state_;
	GObject* _source_object_;
	GAsyncResult* _res_;
	GTask* _async_result;
	GAsyncReadyCallback _callback_;
	gboolean _task_complete_;
	MidoriHSTS* self;
	gchar* filename;
	gchar* _tmp0_;
	GFile* file;
	const gchar* _tmp1_;
	GFile* _tmp2_;
	GFileOutputStream* stream;
	GFile* _tmp3_;
	GFileOutputStream* _tmp4_;
	GHashTable* _tmp5_;
	GList* _tmp6_;
	GList* host_collection;
	GList* host_it;
	gchar* _tmp7_;
	gchar* host;
	MidoriHSTSDirective* directive;
	GHashTable* _tmp8_;
	const gchar* _tmp9_;
	gconstpointer _tmp10_;
	MidoriHSTSDirective* _tmp11_;
	MidoriHSTSDirective* _tmp12_;
	GFileOutputStream* _tmp13_;
	const gchar* _tmp14_;
	MidoriHSTSDirective* _tmp15_;
	SoupDate* _tmp16_;
	gchar* _tmp17_;
	gchar* _tmp18_;
	MidoriHSTSDirective* _tmp19_;
	gboolean _tmp20_;
	gchar* _tmp21_;
	gchar* _tmp22_;
	gchar* _tmp23_;
	gchar* _tmp24_;
	guint8* _tmp25_;
	gint _tmp25__length1;
	guint8* _tmp26_;
	gint _tmp26__length1;
	GFileOutputStream* _tmp27_;
	GError* _error_;
	const gchar* _tmp28_;
	GError* _tmp29_;
	const gchar* _tmp30_;
	GError * _inner_error_;
};

struct _MidoriHSTSParamSpecDirective {
	GParamSpec parent_instance;
};


static gpointer midori_hsts_parent_class = NULL;
static gpointer midori_hsts_directive_parent_class = NULL;
static SoupSessionFeatureInterface * midori_hsts_soup_session_feature_parent_iface = NULL;

gboolean g_hostname_is_ip_address (const gchar* hostname);
GType midori_hsts_get_type (void) G_GNUC_CONST;
gpointer midori_hsts_directive_ref (gpointer instance);
void midori_hsts_directive_unref (gpointer instance);
GParamSpec* midori_hsts_param_spec_directive (const gchar* name,
                                              const gchar* nick,
                                              const gchar* blurb,
                                              GType object_type,
                                              GParamFlags flags);
void midori_hsts_value_set_directive (GValue* value,
                                      gpointer v_object);
void midori_hsts_value_take_directive (GValue* value,
                                       gpointer v_object);
gpointer midori_hsts_value_get_directive (const GValue* value);
GType midori_hsts_directive_get_type (void) G_GNUC_CONST;
#define MIDORI_HSTS_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), MIDORI_TYPE_HSTS, MidoriHSTSPrivate))
MidoriHSTS* midori_hsts_new (void);
MidoriHSTS* midori_hsts_construct (GType object_type);
static void _g_free0_ (gpointer var);
static void _midori_hsts_directive_unref0_ (gpointer var);
static void midori_hsts_read_cache (MidoriHSTS* self,
                             GFile* file,
                             GAsyncReadyCallback _callback_,
                             gpointer _user_data_);
static void midori_hsts_read_cache_finish (MidoriHSTS* self,
                                    GAsyncResult* _res_);
gchar* midori_paths_get_preset_filename (const gchar* folder,
                                         const gchar* filename);
gchar* midori_paths_get_config_filename_for_reading (const gchar* filename);
static void midori_hsts_read_cache_data_free (gpointer _data);
static void midori_hsts_read_cache_async_ready_wrapper (GObject *source_object,
                                                 GAsyncResult *res,
                                                 void *user_data);
static gboolean midori_hsts_read_cache_co (MidoriHstsReadCacheData* _data_);
static void midori_hsts_read_cache_ready (GObject* source_object,
                                   GAsyncResult* _res_,
                                   gpointer _user_data_);
MidoriHSTSDirective* midori_hsts_directive_new (const gchar* max_age,
                                                gboolean include_sub_domains);
MidoriHSTSDirective* midori_hsts_directive_construct (GType object_type,
                                                      const gchar* max_age,
                                                      gboolean include_sub_domains);
gboolean midori_hsts_directive_is_valid (MidoriHSTSDirective* self);
gboolean midori_hsts_directive_is_expired (MidoriHSTSDirective* self);
static void midori_hsts_whitelist_append (MidoriHSTS* self,
                                   const gchar* host,
                                   MidoriHSTSDirective* directive);
static void midori_hsts_queued (MidoriHSTS* self,
                         SoupSession* session,
                         SoupMessage* message);
static void midori_hsts_strict_transport_security_handled (MidoriHSTS* self,
                                                    SoupMessage* message);
static void _midori_hsts_strict_transport_security_handled_soup_message_finished (SoupMessage* _sender,
                                                                           gpointer self);
static gboolean midori_hsts_whitelist_lookup (MidoriHSTS* self,
                                       const gchar* host);
static void midori_hsts_whitelist_remove (MidoriHSTS* self,
                                   const gchar* host);
static void midori_hsts_whitelist_serialize_data_free (gpointer _data);
static void midori_hsts_whitelist_serialize_async_ready_wrapper (GObject *source_object,
                                                          GAsyncResult *res,
                                                          void *user_data);
static void midori_hsts_whitelist_serialize (MidoriHSTS* self,
                                      GAsyncReadyCallback _callback_,
                                      gpointer _user_data_);
static void midori_hsts_whitelist_serialize_finish (MidoriHSTS* self,
                                             GAsyncResult* _res_);
static gboolean midori_hsts_whitelist_serialize_co (MidoriHstsWhitelistSerializeData* _data_);
gboolean midori_paths_is_readonly (void);
gchar* midori_paths_get_config_filename_for_writing (const gchar* filename);
static void midori_hsts_whitelist_serialize_ready (GObject* source_object,
                                            GAsyncResult* _res_,
                                            gpointer _user_data_);
MidoriHSTSDirective* midori_hsts_directive_new_from_header (const gchar* header);
MidoriHSTSDirective* midori_hsts_directive_construct_from_header (GType object_type,
                                                                  const gchar* header);
static gboolean midori_hsts_real_add_feature (SoupSessionFeature* base,
                                       GType type);
static gboolean midori_hsts_real_remove_feature (SoupSessionFeature* base,
                                          GType type);
static gboolean midori_hsts_real_has_feature (SoupSessionFeature* base,
                                       GType type);
static void midori_hsts_real_attach (SoupSessionFeature* base,
                              SoupSession* session);
static void _midori_hsts_queued_soup_session_request_queued (SoupSession* _sender,
                                                      SoupMessage* msg,
                                                      gpointer self);
static void midori_hsts_real_detach (SoupSessionFeature* base,
                              SoupSession* session);
static void midori_hsts_real_request_started (SoupSessionFeature* base,
                                       SoupSession* session,
                                       SoupMessage* msg,
                                       SoupSocket* socket);
static void midori_hsts_real_request_queued (SoupSessionFeature* base,
                                      SoupSession* session,
                                      SoupMessage* message);
static void midori_hsts_real_request_unqueued (SoupSessionFeature* base,
                                        SoupSession* session,
                                        SoupMessage* msg);
static void _vala_SoupDate_free (SoupDate* self);
static void midori_hsts_directive_finalize (MidoriHSTSDirective * obj);
static void midori_hsts_finalize (GObject * obj);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


static void
_g_free0_ (gpointer var)
{
#line 61 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	var = (g_free (var), NULL);
#line 335 "midori-hsts.c"
}


static void
_midori_hsts_directive_unref0_ (gpointer var)
{
#line 61 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	(var == NULL) ? NULL : (var = (midori_hsts_directive_unref (var), NULL));
#line 344 "midori-hsts.c"
}


MidoriHSTS*
midori_hsts_construct (GType object_type)
{
	MidoriHSTS * self = NULL;
	GHashFunc _tmp0_;
	GEqualFunc _tmp1_;
	GHashTable* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	GFile* _tmp5_;
	GFile* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	GFile* _tmp9_;
	GFile* _tmp10_;
	GCompareFunc _tmp11_;
	const gchar* _tmp12_;
#line 60 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTS*) g_object_new (object_type, NULL);
#line 61 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = g_str_hash;
#line 61 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp1_ = g_str_equal;
#line 61 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp2_ = g_hash_table_new_full (_tmp0_, _tmp1_, _g_free0_, _midori_hsts_directive_unref0_);
#line 61 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_hash_table_unref0 (self->priv->whitelist);
#line 61 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self->priv->whitelist = _tmp2_;
#line 62 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp3_ = midori_paths_get_preset_filename (NULL, "hsts");
#line 62 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp4_ = _tmp3_;
#line 62 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp5_ = g_file_new_for_path (_tmp4_);
#line 62 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp6_ = _tmp5_;
#line 62 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_read_cache (self, _tmp6_, NULL, NULL);
#line 62 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_object_unref0 (_tmp6_);
#line 62 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_free0 (_tmp4_);
#line 63 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp7_ = midori_paths_get_config_filename_for_reading ("hsts");
#line 63 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp8_ = _tmp7_;
#line 63 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp9_ = g_file_new_for_path (_tmp8_);
#line 63 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp10_ = _tmp9_;
#line 63 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_read_cache (self, _tmp10_, NULL, NULL);
#line 63 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_object_unref0 (_tmp10_);
#line 63 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_free0 (_tmp8_);
#line 64 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp11_ = g_strcmp0;
#line 64 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp12_ = g_getenv ("MIDORI_DEBUG");
#line 64 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp11_ (_tmp12_, "hsts") == 0) {
#line 65 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		self->priv->debug = TRUE;
#line 413 "midori-hsts.c"
	}
#line 60 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return self;
#line 417 "midori-hsts.c"
}


MidoriHSTS*
midori_hsts_new (void)
{
#line 60 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return midori_hsts_construct (MIDORI_TYPE_HSTS);
#line 426 "midori-hsts.c"
}


static void
midori_hsts_read_cache_data_free (gpointer _data)
{
	MidoriHstsReadCacheData* _data_;
	_data_ = _data;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_object_unref0 (_data_->file);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_object_unref0 (_data_->self);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_slice_free (MidoriHstsReadCacheData, _data_);
#line 441 "midori-hsts.c"
}


static void
midori_hsts_read_cache_async_ready_wrapper (GObject *source_object,
                                            GAsyncResult *res,
                                            void *user_data)
{
	MidoriHstsReadCacheData* _task_data_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_task_data_->_callback_ != NULL) {
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 457 "midori-hsts.c"
	}
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_task_data_->_task_complete_ = TRUE;
#line 461 "midori-hsts.c"
}


static gpointer
_g_object_ref0 (gpointer self)
{
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return self ? g_object_ref (self) : NULL;
#line 470 "midori-hsts.c"
}


static void
midori_hsts_read_cache (MidoriHSTS* self,
                        GFile* file,
                        GAsyncReadyCallback _callback_,
                        gpointer _user_data_)
{
	MidoriHstsReadCacheData* _data_;
	MidoriHSTS* _tmp0_;
	GFile* _tmp1_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_ = g_slice_new0 (MidoriHstsReadCacheData);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_callback_ = _callback_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, midori_hsts_read_cache_async_ready_wrapper, _user_data_);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_callback_ == NULL) {
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_task_complete_ = TRUE;
#line 493 "midori-hsts.c"
	}
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_task_set_task_data (_data_->_async_result, _data_, midori_hsts_read_cache_data_free);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->self = _tmp0_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp1_ = _g_object_ref0 (file);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_object_unref0 (_data_->file);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->file = _tmp1_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_read_cache_co (_data_);
#line 509 "midori-hsts.c"
}


static void
midori_hsts_read_cache_finish (MidoriHSTS* self,
                               GAsyncResult* _res_)
{
	MidoriHstsReadCacheData* _data_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 520 "midori-hsts.c"
}


static void
midori_hsts_read_cache_ready (GObject* source_object,
                              GAsyncResult* _res_,
                              gpointer _user_data_)
{
	MidoriHstsReadCacheData* _data_;
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_ = _user_data_;
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_source_object_ = source_object;
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_res_ = _res_;
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_task_complete_ = TRUE;
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_read_cache_co (_data_);
#line 540 "midori-hsts.c"
}


static gboolean
bool_parse (const gchar* str)
{
	gboolean result = FALSE;
#line 44 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (str != NULL, FALSE);
#line 45 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (g_strcmp0 (str, "true") == 0) {
#line 46 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = TRUE;
#line 46 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 556 "midori-hsts.c"
	} else {
#line 48 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = FALSE;
#line 48 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 562 "midori-hsts.c"
	}
}


static gboolean
midori_hsts_read_cache_co (MidoriHstsReadCacheData* _data_)
{
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	switch (_data_->_state_) {
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		case 0:
#line 574 "midori-hsts.c"
		goto _state_0;
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		case 1:
#line 578 "midori-hsts.c"
		goto _state_1;
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		case 2:
#line 582 "midori-hsts.c"
		goto _state_2;
		default:
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_assert_not_reached ();
#line 587 "midori-hsts.c"
	}
	_state_0:
	{
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_state_ = 1;
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_file_read_async (_data_->file, G_PRIORITY_DEFAULT, NULL, midori_hsts_read_cache_ready, _data_);
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return FALSE;
#line 597 "midori-hsts.c"
		_state_1:
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp1_ = g_file_read_finish (_data_->file, _data_->_res_, &_data_->_inner_error_);
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp0_ = _data_->_tmp1_;
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 605 "midori-hsts.c"
			goto __catch0_g_error;
		}
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp2_ = g_data_input_stream_new ((GInputStream*) _data_->_tmp0_);
#line 70 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->stream = _data_->_tmp2_;
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		while (TRUE) {
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp3_ = _data_->stream;
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_state_ = 2;
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			g_data_input_stream_read_line_async (_data_->_tmp3_, G_PRIORITY_DEFAULT, NULL, midori_hsts_read_cache_ready, _data_);
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			return FALSE;
#line 622 "midori-hsts.c"
			_state_2:
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp4_ = g_data_input_stream_read_line_finish (_data_->_tmp3_, _data_->_res_, NULL, &_data_->_inner_error_);
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->line = _data_->_tmp4_;
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_g_object_unref0 (_data_->stream);
#line 72 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_g_object_unref0 (_data_->_tmp0_);
#line 634 "midori-hsts.c"
				goto __catch0_g_error;
			}
#line 73 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp5_ = _data_->line;
#line 73 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			if (_data_->_tmp5_ == NULL) {
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_g_free0 (_data_->line);
#line 74 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				break;
#line 645 "midori-hsts.c"
			}
#line 77 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp6_ = _data_->line;
#line 77 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp8_ = _data_->_tmp7_ = g_strsplit (_data_->_tmp6_, " ", 3);
#line 77 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->parts = _data_->_tmp8_;
#line 77 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->parts_length1 = _vala_array_length (_data_->_tmp7_);
#line 77 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_parts_size_ = _data_->parts_length1;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp11_ = _data_->parts;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp11__length1 = _data_->parts_length1;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp12_ = _data_->_tmp11_[0];
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			if (_data_->_tmp12_ == NULL) {
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp10_ = TRUE;
#line 667 "midori-hsts.c"
			} else {
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp13_ = _data_->parts;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp13__length1 = _data_->parts_length1;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp14_ = _data_->_tmp13_[1];
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp10_ = _data_->_tmp14_ == NULL;
#line 677 "midori-hsts.c"
			}
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			if (_data_->_tmp10_) {
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp9_ = TRUE;
#line 683 "midori-hsts.c"
			} else {
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp15_ = _data_->parts;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp15__length1 = _data_->parts_length1;
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp16_ = _data_->_tmp15_[2];
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp9_ = _data_->_tmp16_ == NULL;
#line 693 "midori-hsts.c"
			}
#line 78 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			if (_data_->_tmp9_) {
#line 79 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->parts = (_vala_array_free (_data_->parts, _data_->parts_length1, (GDestroyNotify) g_free), NULL);
#line 79 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_g_free0 (_data_->line);
#line 79 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				continue;
#line 703 "midori-hsts.c"
			}
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp17_ = _data_->parts;
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp17__length1 = _data_->parts_length1;
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp18_ = _data_->_tmp17_[0];
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp19_ = g_strstrip (_data_->_tmp18_);
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp20_ = g_strdup (_data_->_tmp19_);
#line 81 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->host = _data_->_tmp20_;
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp21_ = _data_->parts;
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp21__length1 = _data_->parts_length1;
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp22_ = _data_->_tmp21_[1];
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp23_ = g_strstrip (_data_->_tmp22_);
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp24_ = g_strdup (_data_->_tmp23_);
#line 82 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->expire = _data_->_tmp24_;
#line 83 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp25_ = _data_->parts;
#line 83 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp25__length1 = _data_->parts_length1;
#line 83 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp26_ = _data_->_tmp25_[2];
#line 83 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp27_ = g_strstrip (_data_->_tmp26_);
#line 83 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->allow_subdomains = bool_parse (_data_->_tmp27_);
#line 85 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp28_ = _data_->expire;
#line 85 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp29_ = _data_->allow_subdomains;
#line 85 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp30_ = midori_hsts_directive_new (_data_->_tmp28_, _data_->_tmp29_);
#line 85 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->directive = _data_->_tmp30_;
#line 86 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->_tmp32_ = _data_->directive;
#line 86 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			if (midori_hsts_directive_is_valid (_data_->_tmp32_)) {
#line 86 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp33_ = _data_->directive;
#line 86 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp31_ = !midori_hsts_directive_is_expired (_data_->_tmp33_);
#line 755 "midori-hsts.c"
			} else {
#line 86 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp31_ = FALSE;
#line 759 "midori-hsts.c"
			}
#line 86 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			if (_data_->_tmp31_) {
#line 87 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp34_ = _data_->self->priv->debug;
#line 87 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				if (_data_->_tmp34_) {
#line 88 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp35_ = stdout;
#line 88 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp36_ = _data_->host;
#line 88 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					fprintf (_data_->_tmp35_, "HSTS: loading rule for %s\n", _data_->_tmp36_);
#line 773 "midori-hsts.c"
				}
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp37_ = _data_->host;
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp38_ = _data_->directive;
#line 89 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				midori_hsts_whitelist_append (_data_->self, _data_->_tmp37_, _data_->_tmp38_);
#line 781 "midori-hsts.c"
			}
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_midori_hsts_directive_unref0 (_data_->directive);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_g_free0 (_data_->expire);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_g_free0 (_data_->host);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->parts = (_vala_array_free (_data_->parts, _data_->parts_length1, (GDestroyNotify) g_free), NULL);
#line 71 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_g_free0 (_data_->line);
#line 793 "midori-hsts.c"
		}
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_object_unref0 (_data_->stream);
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_object_unref0 (_data_->_tmp0_);
#line 799 "midori-hsts.c"
	}
	goto __finally0;
	__catch0_g_error:
	{
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_error_ = _data_->_inner_error_;
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_inner_error_ = NULL;
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_error_free0 (_data_->_error_);
#line 810 "midori-hsts.c"
	}
	__finally0:
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_clear_error (&_data_->_inner_error_);
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_object_unref (_data_->_async_result);
#line 69 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return FALSE;
#line 823 "midori-hsts.c"
	}
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_data_->_state_ != 0) {
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 833 "midori-hsts.c"
		}
	}
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_object_unref (_data_->_async_result);
#line 68 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return FALSE;
#line 840 "midori-hsts.c"
}


static void
_midori_hsts_strict_transport_security_handled_soup_message_finished (SoupMessage* _sender,
                                                                      gpointer self)
{
#line 99 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_strict_transport_security_handled ((MidoriHSTS*) self, _sender);
#line 850 "midori-hsts.c"
}


static void
midori_hsts_queued (MidoriHSTS* self,
                    SoupSession* session,
                    SoupMessage* message)
{
	SoupURI* _tmp0_;
	SoupURI* _tmp1_;
	const gchar* _tmp2_;
#line 96 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (self != NULL);
#line 96 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (session != NULL);
#line 96 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (message != NULL);
#line 98 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = soup_message_get_uri (message);
#line 98 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp1_ = _tmp0_;
#line 98 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp2_ = _tmp1_->scheme;
#line 98 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (g_strcmp0 (_tmp2_, "https") == 0) {
#line 99 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_signal_connect_object (message, "finished", (GCallback) _midori_hsts_strict_transport_security_handled_soup_message_finished, self, 0);
#line 878 "midori-hsts.c"
	} else {
		SoupURI* _tmp3_;
		SoupURI* _tmp4_;
		const gchar* _tmp5_;
#line 101 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp3_ = soup_message_get_uri (message);
#line 101 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp4_ = _tmp3_;
#line 101 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp5_ = _tmp4_->host;
#line 101 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		if (midori_hsts_whitelist_lookup (self, _tmp5_)) {
#line 891 "midori-hsts.c"
			SoupURI* _tmp6_;
			SoupURI* _tmp7_;
			gboolean _tmp8_;
#line 102 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp6_ = soup_message_get_uri (message);
#line 102 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp7_ = _tmp6_;
#line 102 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			soup_uri_set_scheme (_tmp7_, "https");
#line 103 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			soup_session_requeue_message (session, message);
#line 104 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp8_ = self->priv->debug;
#line 104 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			if (_tmp8_) {
#line 907 "midori-hsts.c"
				FILE* _tmp9_;
				SoupURI* _tmp10_;
				SoupURI* _tmp11_;
				const gchar* _tmp12_;
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp9_ = stdout;
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp10_ = soup_message_get_uri (message);
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp11_ = _tmp10_;
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp12_ = _tmp11_->host;
#line 105 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				fprintf (_tmp9_, "HSTS: Enforce %s\n", _tmp12_);
#line 922 "midori-hsts.c"
			}
		}
	}
}


static gpointer
_midori_hsts_directive_ref0 (gpointer self)
{
#line 117 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return self ? midori_hsts_directive_ref (self) : NULL;
#line 934 "midori-hsts.c"
}


static gint
string_index_of_char (const gchar* self,
                      gunichar c,
                      gint start_index)
{
	gint result = 0;
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
#line 1045 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, 0);
#line 1046 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = g_utf8_strchr (((gchar*) self) + start_index, (gssize) -1, c);
#line 1046 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_result_ = _tmp0_;
#line 1048 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = _result_;
#line 1048 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp1_ != NULL) {
#line 957 "midori-hsts.c"
		gchar* _tmp2_;
#line 1049 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = _result_;
#line 1049 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = (gint) (_tmp2_ - ((gchar*) self));
#line 1049 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 965 "midori-hsts.c"
	} else {
#line 1051 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = -1;
#line 1051 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 971 "midori-hsts.c"
	}
}


static glong
string_strnlen (gchar* str,
                glong maxlen)
{
	glong result = 0L;
	gchar* end = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
#line 1336 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = memchr (str, 0, (gsize) maxlen);
#line 1336 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	end = _tmp0_;
#line 1337 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = end;
#line 1337 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp1_ == NULL) {
#line 1338 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = maxlen;
#line 1338 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 996 "midori-hsts.c"
	} else {
		gchar* _tmp2_;
#line 1340 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = end;
#line 1340 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = (glong) (_tmp2_ - str);
#line 1340 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1005 "midori-hsts.c"
	}
}


static gchar*
string_substring (const gchar* self,
                  glong offset,
                  glong len)
{
	gchar* result = NULL;
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	glong _tmp6_;
	gchar* _tmp7_;
#line 1347 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1349 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (offset >= ((glong) 0)) {
#line 1349 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = len >= ((glong) 0);
#line 1026 "midori-hsts.c"
	} else {
#line 1349 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = FALSE;
#line 1030 "midori-hsts.c"
	}
#line 1349 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (_tmp0_) {
#line 1351 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		string_length = string_strnlen ((gchar*) self, offset + len);
#line 1036 "midori-hsts.c"
	} else {
		gint _tmp1_;
		gint _tmp2_;
#line 1353 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp1_ = strlen (self);
#line 1353 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp2_ = _tmp1_;
#line 1353 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		string_length = (glong) _tmp2_;
#line 1046 "midori-hsts.c"
	}
#line 1356 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (offset < ((glong) 0)) {
#line 1050 "midori-hsts.c"
		glong _tmp3_;
#line 1357 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp3_ = string_length;
#line 1357 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		offset = _tmp3_ + offset;
#line 1358 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_return_val_if_fail (offset >= ((glong) 0), NULL);
#line 1058 "midori-hsts.c"
	} else {
		glong _tmp4_;
#line 1360 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp4_ = string_length;
#line 1360 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		g_return_val_if_fail (offset <= _tmp4_, NULL);
#line 1065 "midori-hsts.c"
	}
#line 1362 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (len < ((glong) 0)) {
#line 1069 "midori-hsts.c"
		glong _tmp5_;
#line 1363 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp5_ = string_length;
#line 1363 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		len = _tmp5_ - offset;
#line 1075 "midori-hsts.c"
	}
#line 1365 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp6_ = string_length;
#line 1365 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail ((offset + len) <= _tmp6_, NULL);
#line 1366 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp7_ = g_strndup (((gchar*) self) + offset, (gsize) len);
#line 1366 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp7_;
#line 1366 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1087 "midori-hsts.c"
}


static gboolean
midori_hsts_whitelist_lookup (MidoriHSTS* self,
                              const gchar* host)
{
	gboolean result = FALSE;
	MidoriHSTSDirective* directive = NULL;
	gboolean is_subdomain = FALSE;
	GHashTable* _tmp0_;
	gconstpointer _tmp1_;
	MidoriHSTSDirective* _tmp2_;
	MidoriHSTSDirective* _tmp3_;
	gboolean _tmp15_ = FALSE;
	gboolean _tmp16_ = FALSE;
	MidoriHSTSDirective* _tmp17_;
#line 109 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 109 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_val_if_fail (host != NULL, FALSE);
#line 110 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	directive = NULL;
#line 111 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	is_subdomain = FALSE;
#line 113 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (g_hostname_is_ip_address (host)) {
#line 114 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		result = FALSE;
#line 114 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_midori_hsts_directive_unref0 (directive);
#line 114 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return result;
#line 1121 "midori-hsts.c"
	}
#line 117 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = self->priv->whitelist;
#line 117 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp1_ = g_hash_table_lookup (_tmp0_, host);
#line 117 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp2_ = _midori_hsts_directive_ref0 ((MidoriHSTSDirective*) _tmp1_);
#line 117 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_midori_hsts_directive_unref0 (directive);
#line 117 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	directive = _tmp2_;
#line 120 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp3_ = directive;
#line 120 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp3_ == NULL) {
#line 1137 "midori-hsts.c"
		gint offset = 0;
#line 121 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		offset = 0;
#line 1141 "midori-hsts.c"
		{
			gint _tmp4_;
			gboolean _tmp5_ = FALSE;
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp4_ = offset;
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			offset = string_index_of_char (host, (gunichar) '.', _tmp4_) + 1;
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp5_ = TRUE;
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			while (TRUE) {
#line 1153 "midori-hsts.c"
				gint _tmp7_;
				gchar* component = NULL;
				gint _tmp8_;
				gchar* _tmp9_;
				GHashTable* _tmp10_;
				const gchar* _tmp11_;
				gconstpointer _tmp12_;
				MidoriHSTSDirective* _tmp13_;
				MidoriHSTSDirective* _tmp14_;
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				if (!_tmp5_) {
#line 1165 "midori-hsts.c"
					gint _tmp6_;
#line 124 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_tmp6_ = offset;
#line 124 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					offset = string_index_of_char (host, (gunichar) '.', _tmp6_) + 1;
#line 1171 "midori-hsts.c"
				}
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp5_ = FALSE;
#line 123 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp7_ = offset;
#line 123 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				if (!(_tmp7_ > 0)) {
#line 123 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					break;
#line 1181 "midori-hsts.c"
				}
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp8_ = offset;
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp9_ = string_substring (host, (glong) _tmp8_, (glong) -1);
#line 125 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				component = _tmp9_;
#line 127 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp10_ = self->priv->whitelist;
#line 127 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp11_ = component;
#line 127 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp12_ = g_hash_table_lookup (_tmp10_, _tmp11_);
#line 127 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp13_ = _midori_hsts_directive_ref0 ((MidoriHSTSDirective*) _tmp12_);
#line 127 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_midori_hsts_directive_unref0 (directive);
#line 127 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				directive = _tmp13_;
#line 128 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_tmp14_ = directive;
#line 128 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				if (_tmp14_ != NULL) {
#line 129 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					is_subdomain = TRUE;
#line 130 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_g_free0 (component);
#line 130 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					break;
#line 1211 "midori-hsts.c"
				}
#line 122 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_g_free0 (component);
#line 1215 "midori-hsts.c"
			}
		}
	}
#line 135 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp17_ = directive;
#line 135 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp17_ != NULL) {
#line 1223 "midori-hsts.c"
		MidoriHSTSDirective* _tmp18_;
#line 136 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp18_ = directive;
#line 136 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp16_ = !midori_hsts_directive_is_expired (_tmp18_);
#line 1229 "midori-hsts.c"
	} else {
#line 135 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp16_ = FALSE;
#line 1233 "midori-hsts.c"
	}
#line 135 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp16_) {
#line 1237 "midori-hsts.c"
		gboolean _tmp19_ = FALSE;
		gboolean _tmp20_;
#line 137 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp20_ = is_subdomain;
#line 137 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		if (_tmp20_) {
#line 1244 "midori-hsts.c"
			MidoriHSTSDirective* _tmp21_;
			gboolean _tmp22_;
#line 137 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp21_ = directive;
#line 137 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp22_ = _tmp21_->sub_domains;
#line 137 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp19_ = _tmp22_;
#line 1253 "midori-hsts.c"
		} else {
#line 137 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp19_ = TRUE;
#line 1257 "midori-hsts.c"
		}
#line 137 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp15_ = _tmp19_;
#line 1261 "midori-hsts.c"
	} else {
#line 135 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp15_ = FALSE;
#line 1265 "midori-hsts.c"
	}
#line 135 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	result = _tmp15_;
#line 135 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_midori_hsts_directive_unref0 (directive);
#line 135 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return result;
#line 1273 "midori-hsts.c"
}


static void
midori_hsts_whitelist_append (MidoriHSTS* self,
                              const gchar* host,
                              MidoriHSTSDirective* directive)
{
	GHashTable* _tmp0_;
	gchar* _tmp1_;
	MidoriHSTSDirective* _tmp2_;
#line 140 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (self != NULL);
#line 140 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (host != NULL);
#line 140 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (directive != NULL);
#line 141 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = self->priv->whitelist;
#line 141 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp1_ = g_strdup (host);
#line 141 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp2_ = _midori_hsts_directive_ref0 (directive);
#line 141 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_hash_table_insert (_tmp0_, _tmp1_, _tmp2_);
#line 1299 "midori-hsts.c"
}


static void
midori_hsts_whitelist_remove (MidoriHSTS* self,
                              const gchar* host)
{
	GHashTable* _tmp0_;
#line 144 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (self != NULL);
#line 144 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (host != NULL);
#line 145 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = self->priv->whitelist;
#line 145 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_hash_table_remove (_tmp0_, host);
#line 1316 "midori-hsts.c"
}


static void
midori_hsts_whitelist_serialize_data_free (gpointer _data)
{
	MidoriHstsWhitelistSerializeData* _data_;
	_data_ = _data;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_object_unref0 (_data_->self);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_slice_free (MidoriHstsWhitelistSerializeData, _data_);
#line 1329 "midori-hsts.c"
}


static void
midori_hsts_whitelist_serialize_async_ready_wrapper (GObject *source_object,
                                                     GAsyncResult *res,
                                                     void *user_data)
{
	MidoriHstsWhitelistSerializeData* _task_data_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_task_data_ = g_task_get_task_data (G_TASK (res));
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_task_data_->_callback_ != NULL) {
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_task_data_->_callback_ (source_object, res, user_data);
#line 1345 "midori-hsts.c"
	}
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_task_data_->_task_complete_ = TRUE;
#line 1349 "midori-hsts.c"
}


static void
midori_hsts_whitelist_serialize (MidoriHSTS* self,
                                 GAsyncReadyCallback _callback_,
                                 gpointer _user_data_)
{
	MidoriHstsWhitelistSerializeData* _data_;
	MidoriHSTS* _tmp0_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_ = g_slice_new0 (MidoriHstsWhitelistSerializeData);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_callback_ = _callback_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_async_result = g_task_new (G_OBJECT (self), NULL, midori_hsts_whitelist_serialize_async_ready_wrapper, _user_data_);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_callback_ == NULL) {
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_task_complete_ = TRUE;
#line 1370 "midori-hsts.c"
	}
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_task_set_task_data (_data_->_async_result, _data_, midori_hsts_whitelist_serialize_data_free);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = _g_object_ref0 (self);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->self = _tmp0_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_whitelist_serialize_co (_data_);
#line 1380 "midori-hsts.c"
}


static void
midori_hsts_whitelist_serialize_finish (MidoriHSTS* self,
                                        GAsyncResult* _res_)
{
	MidoriHstsWhitelistSerializeData* _data_;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_ = g_task_propagate_pointer (G_TASK (_res_), NULL);
#line 1391 "midori-hsts.c"
}


static gchar*
bool_to_string (gboolean self)
{
	gchar* result = NULL;
#line 37 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (self) {
#line 1401 "midori-hsts.c"
		gchar* _tmp0_;
#line 38 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp0_ = g_strdup ("true");
#line 38 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = _tmp0_;
#line 38 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1409 "midori-hsts.c"
	} else {
		gchar* _tmp1_;
#line 40 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		_tmp1_ = g_strdup ("false");
#line 40 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		result = _tmp1_;
#line 40 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		return result;
#line 1418 "midori-hsts.c"
	}
}


static guint8*
string_get_data (const gchar* self,
                 int* result_length1)
{
	guint8* result;
	guint8* res = NULL;
	gint res_length1;
	gint _res_size_;
	gint _tmp0_;
	gint _tmp1_;
	gint _tmp2_;
	guint8* _tmp3_;
	gint _tmp3__length1;
	guint8* _tmp4_;
	gint _tmp4__length1;
#line 1442 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1443 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	res = (guint8*) self;
#line 1443 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	res_length1 = -1;
#line 1443 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_res_size_ = res_length1;
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strlen (self);
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp1_ = _tmp0_;
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	res_length1 = (gint) _tmp1_;
#line 1444 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp2_ = res_length1;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp3_ = res;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp3__length1 = res_length1;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp4_ = _tmp3_;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp4__length1 = _tmp3__length1;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	if (result_length1) {
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
		*result_length1 = _tmp4__length1;
#line 1466 "midori-hsts.c"
	}
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp4_;
#line 1445 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 1472 "midori-hsts.c"
}


static void
midori_hsts_whitelist_serialize_ready (GObject* source_object,
                                       GAsyncResult* _res_,
                                       gpointer _user_data_)
{
	MidoriHstsWhitelistSerializeData* _data_;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_ = _user_data_;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_source_object_ = source_object;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_res_ = _res_;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_task_complete_ = TRUE;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_whitelist_serialize_co (_data_);
#line 1492 "midori-hsts.c"
}


static gboolean
midori_hsts_whitelist_serialize_co (MidoriHstsWhitelistSerializeData* _data_)
{
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	switch (_data_->_state_) {
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		case 0:
#line 1503 "midori-hsts.c"
		goto _state_0;
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		case 1:
#line 1507 "midori-hsts.c"
		goto _state_1;
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		case 2:
#line 1511 "midori-hsts.c"
		goto _state_2;
		default:
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_assert_not_reached ();
#line 1516 "midori-hsts.c"
	}
	_state_0:
#line 149 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (midori_paths_is_readonly ()) {
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		if (_data_->_state_ != 0) {
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			while (_data_->_task_complete_ != TRUE) {
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1529 "midori-hsts.c"
			}
		}
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_object_unref (_data_->_async_result);
#line 150 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return FALSE;
#line 1536 "midori-hsts.c"
	}
#line 152 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->_tmp0_ = midori_paths_get_config_filename_for_writing ("hsts");
#line 152 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_data_->filename = _data_->_tmp0_;
#line 1542 "midori-hsts.c"
	{
#line 154 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp1_ = _data_->filename;
#line 154 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp2_ = g_file_new_for_path (_data_->_tmp1_);
#line 154 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->file = _data_->_tmp2_;
#line 155 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp3_ = _data_->file;
#line 155 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp4_ = g_file_replace (_data_->_tmp3_, NULL, FALSE, G_FILE_CREATE_NONE, NULL, &_data_->_inner_error_);
#line 155 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->stream = _data_->_tmp4_;
#line 155 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 155 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_g_object_unref0 (_data_->file);
#line 1560 "midori-hsts.c"
			goto __catch1_g_error;
		}
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp5_ = _data_->self->priv->whitelist;
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp6_ = g_hash_table_get_keys (_data_->_tmp5_);
#line 1567 "midori-hsts.c"
		{
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_data_->host_collection = _data_->_tmp6_;
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			for (_data_->host_it = _data_->host_collection; _data_->host_it != NULL; _data_->host_it = _data_->host_it->next) {
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->_tmp7_ = g_strdup ((const gchar*) _data_->host_it->data);
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
				_data_->host = _data_->_tmp7_;
#line 1577 "midori-hsts.c"
				{
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp8_ = _data_->self->priv->whitelist;
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp9_ = _data_->host;
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp10_ = g_hash_table_lookup (_data_->_tmp8_, _data_->_tmp9_);
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp11_ = _midori_hsts_directive_ref0 ((MidoriHSTSDirective*) _data_->_tmp10_);
#line 158 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->directive = _data_->_tmp11_;
#line 161 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp12_ = _data_->directive;
#line 161 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					if (midori_hsts_directive_is_expired (_data_->_tmp12_)) {
#line 162 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
						_midori_hsts_directive_unref0 (_data_->directive);
#line 162 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
						_g_free0 (_data_->host);
#line 162 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
						continue;
#line 1599 "midori-hsts.c"
					}
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp13_ = _data_->stream;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp14_ = _data_->host;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp15_ = _data_->directive;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp16_ = _data_->_tmp15_->expires;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp17_ = soup_date_to_string (_data_->_tmp16_, SOUP_DATE_ISO8601_COMPACT);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp18_ = _data_->_tmp17_;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp19_ = _data_->directive;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp20_ = _data_->_tmp19_->sub_domains;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp21_ = bool_to_string (_data_->_tmp20_);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp22_ = _data_->_tmp21_;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp23_ = g_strdup_printf ("%s %s %s\n", _data_->_tmp14_, _data_->_tmp18_, _data_->_tmp22_);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp24_ = _data_->_tmp23_;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp25_ = string_get_data (_data_->_tmp24_, &_data_->_tmp25__length1);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp26_ = _data_->_tmp25_;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_tmp26__length1 = _data_->_tmp25__length1;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_data_->_state_ = 1;
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					g_output_stream_write_async ((GOutputStream*) _data_->_tmp13_, _data_->_tmp26_, (gsize) _data_->_tmp26__length1, G_PRIORITY_DEFAULT, NULL, midori_hsts_whitelist_serialize_ready, _data_);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					return FALSE;
#line 1637 "midori-hsts.c"
					_state_1:
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					g_output_stream_write_finish ((GOutputStream*) _data_->_tmp13_, _data_->_res_, &_data_->_inner_error_);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_g_free0 (_data_->_tmp24_);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_g_free0 (_data_->_tmp22_);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_g_free0 (_data_->_tmp18_);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
						_midori_hsts_directive_unref0 (_data_->directive);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
						_g_free0 (_data_->host);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
						_g_list_free0 (_data_->host_collection);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
						_g_object_unref0 (_data_->stream);
#line 164 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
						_g_object_unref0 (_data_->file);
#line 1659 "midori-hsts.c"
						goto __catch1_g_error;
					}
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_midori_hsts_directive_unref0 (_data_->directive);
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
					_g_free0 (_data_->host);
#line 1666 "midori-hsts.c"
				}
			}
#line 157 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_g_list_free0 (_data_->host_collection);
#line 1671 "midori-hsts.c"
		}
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp27_ = _data_->stream;
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_state_ = 2;
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_output_stream_flush_async ((GOutputStream*) _data_->_tmp27_, G_PRIORITY_DEFAULT, NULL, midori_hsts_whitelist_serialize_ready, _data_);
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return FALSE;
#line 1681 "midori-hsts.c"
		_state_2:
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_output_stream_flush_finish ((GOutputStream*) _data_->_tmp27_, _data_->_res_, &_data_->_inner_error_);
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_g_object_unref0 (_data_->stream);
#line 168 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_g_object_unref0 (_data_->file);
#line 1691 "midori-hsts.c"
			goto __catch1_g_error;
		}
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_object_unref0 (_data_->stream);
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_object_unref0 (_data_->file);
#line 1698 "midori-hsts.c"
	}
	goto __finally1;
	__catch1_g_error:
	{
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_error_ = _data_->_inner_error_;
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_inner_error_ = NULL;
#line 171 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp28_ = _data_->filename;
#line 171 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp29_ = _data_->_error_;
#line 171 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_data_->_tmp30_ = _data_->_tmp29_->message;
#line 171 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_critical ("midori-hsts.vala:171: Failed to update %s: %s", _data_->_tmp28_, _data_->_tmp30_);
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_error_free0 (_data_->_error_);
#line 1717 "midori-hsts.c"
	}
	__finally1:
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (G_UNLIKELY (_data_->_inner_error_ != NULL)) {
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_free0 (_data_->filename);
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _data_->_inner_error_->message, g_quark_to_string (_data_->_inner_error_->domain), _data_->_inner_error_->code);
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_clear_error (&_data_->_inner_error_);
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_object_unref (_data_->_async_result);
#line 153 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return FALSE;
#line 1732 "midori-hsts.c"
	}
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_free0 (_data_->filename);
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_task_return_pointer (_data_->_async_result, _data_, NULL);
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_data_->_state_ != 0) {
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		while (_data_->_task_complete_ != TRUE) {
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			g_main_context_iteration (g_task_get_context (_data_->_async_result), TRUE);
#line 1744 "midori-hsts.c"
		}
	}
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_object_unref (_data_->_async_result);
#line 148 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return FALSE;
#line 1751 "midori-hsts.c"
}


static void
midori_hsts_strict_transport_security_handled (MidoriHSTS* self,
                                               SoupMessage* message)
{
	gboolean _tmp0_ = FALSE;
	const gchar* hsts = NULL;
	SoupMessageHeaders* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	MidoriHSTSDirective* directive = NULL;
	const gchar* _tmp6_;
	MidoriHSTSDirective* _tmp7_;
	gboolean _tmp8_;
	MidoriHSTSDirective* _tmp17_;
#line 175 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (self != NULL);
#line 175 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (message != NULL);
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (message == NULL) {
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp0_ = TRUE;
#line 1777 "midori-hsts.c"
	} else {
		SoupURI* _tmp1_;
		SoupURI* _tmp2_;
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp1_ = soup_message_get_uri (message);
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp2_ = _tmp1_;
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp0_ = _tmp2_ == NULL;
#line 1787 "midori-hsts.c"
	}
#line 176 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp0_) {
#line 177 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return;
#line 1793 "midori-hsts.c"
	}
#line 179 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp3_ = message->response_headers;
#line 179 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp4_ = soup_message_headers_get_one (_tmp3_, "Strict-Transport-Security");
#line 179 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	hsts = _tmp4_;
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp5_ = hsts;
#line 180 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp5_ == NULL) {
#line 181 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return;
#line 1807 "midori-hsts.c"
	}
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp6_ = hsts;
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp7_ = midori_hsts_directive_new_from_header (_tmp6_);
#line 183 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	directive = _tmp7_;
#line 185 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp8_ = self->priv->debug;
#line 185 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp8_) {
#line 1819 "midori-hsts.c"
		FILE* _tmp9_;
		SoupURI* _tmp10_;
		SoupURI* _tmp11_;
		const gchar* _tmp12_;
		const gchar* _tmp13_;
		MidoriHSTSDirective* _tmp14_;
		gchar* _tmp15_;
		gchar* _tmp16_;
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp9_ = stdout;
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp10_ = soup_message_get_uri (message);
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp11_ = _tmp10_;
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp12_ = _tmp11_->host;
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp13_ = hsts;
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp14_ = directive;
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp15_ = bool_to_string (midori_hsts_directive_is_valid (_tmp14_));
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp16_ = _tmp15_;
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		fprintf (_tmp9_, "HSTS: '%s' sets '%s' valid? %s\n", _tmp12_, _tmp13_, _tmp16_);
#line 186 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_free0 (_tmp16_);
#line 1848 "midori-hsts.c"
	}
#line 189 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp17_ = directive;
#line 189 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (midori_hsts_directive_is_valid (_tmp17_)) {
#line 1854 "midori-hsts.c"
		SoupURI* _tmp18_;
		SoupURI* _tmp19_;
		const gchar* _tmp20_;
		MidoriHSTSDirective* _tmp21_;
#line 190 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp18_ = soup_message_get_uri (message);
#line 190 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp19_ = _tmp18_;
#line 190 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp20_ = _tmp19_->host;
#line 190 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp21_ = directive;
#line 190 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		midori_hsts_whitelist_append (self, _tmp20_, _tmp21_);
#line 1869 "midori-hsts.c"
	} else {
		SoupURI* _tmp22_;
		SoupURI* _tmp23_;
		const gchar* _tmp24_;
#line 192 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp22_ = soup_message_get_uri (message);
#line 192 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp23_ = _tmp22_;
#line 192 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp24_ = _tmp23_->host;
#line 192 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		midori_hsts_whitelist_remove (self, _tmp24_);
#line 1882 "midori-hsts.c"
	}
#line 195 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_whitelist_serialize (self, NULL, NULL);
#line 175 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_midori_hsts_directive_unref0 (directive);
#line 1888 "midori-hsts.c"
}


static gboolean
midori_hsts_real_add_feature (SoupSessionFeature* base,
                              GType type)
{
	MidoriHSTS * self;
	gboolean result = FALSE;
#line 199 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTS*) base;
#line 199 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	result = FALSE;
#line 199 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return result;
#line 1904 "midori-hsts.c"
}


static gboolean
midori_hsts_real_remove_feature (SoupSessionFeature* base,
                                 GType type)
{
	MidoriHSTS * self;
	gboolean result = FALSE;
#line 200 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTS*) base;
#line 200 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	result = FALSE;
#line 200 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return result;
#line 1920 "midori-hsts.c"
}


static gboolean
midori_hsts_real_has_feature (SoupSessionFeature* base,
                              GType type)
{
	MidoriHSTS * self;
	gboolean result = FALSE;
#line 201 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTS*) base;
#line 201 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	result = FALSE;
#line 201 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return result;
#line 1936 "midori-hsts.c"
}


static void
_midori_hsts_queued_soup_session_request_queued (SoupSession* _sender,
                                                 SoupMessage* msg,
                                                 gpointer self)
{
#line 203 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_queued ((MidoriHSTS*) self, _sender, msg);
#line 1947 "midori-hsts.c"
}


static void
midori_hsts_real_attach (SoupSessionFeature* base,
                         SoupSession* session)
{
	MidoriHSTS * self;
#line 203 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTS*) base;
#line 203 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (session != NULL);
#line 203 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_signal_connect_object (session, "request-queued", (GCallback) _midori_hsts_queued_soup_session_request_queued, self, 0);
#line 1962 "midori-hsts.c"
}


static void
midori_hsts_real_detach (SoupSessionFeature* base,
                         SoupSession* session)
{
	MidoriHSTS * self;
#line 204 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTS*) base;
#line 204 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (session != NULL);
#line 1975 "midori-hsts.c"
}


static void
midori_hsts_real_request_started (SoupSessionFeature* base,
                                  SoupSession* session,
                                  SoupMessage* msg,
                                  SoupSocket* socket)
{
	MidoriHSTS * self;
#line 207 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTS*) base;
#line 207 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (session != NULL);
#line 207 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (msg != NULL);
#line 207 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (socket != NULL);
#line 1994 "midori-hsts.c"
}


static void
midori_hsts_real_request_queued (SoupSessionFeature* base,
                                 SoupSession* session,
                                 SoupMessage* message)
{
	MidoriHSTS * self;
#line 208 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTS*) base;
#line 208 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (session != NULL);
#line 208 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (message != NULL);
#line 2010 "midori-hsts.c"
}


static void
midori_hsts_real_request_unqueued (SoupSessionFeature* base,
                                   SoupSession* session,
                                   SoupMessage* msg)
{
	MidoriHSTS * self;
#line 209 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTS*) base;
#line 209 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (session != NULL);
#line 209 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (msg != NULL);
#line 2026 "midori-hsts.c"
}


static void
_vala_SoupDate_free (SoupDate* self)
{
#line 18 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_boxed_free (soup_date_get_type (), self);
#line 2035 "midori-hsts.c"
}


MidoriHSTSDirective*
midori_hsts_directive_construct (GType object_type,
                                 const gchar* max_age,
                                 gboolean include_sub_domains)
{
	MidoriHSTSDirective* self = NULL;
	SoupDate* _tmp0_;
#line 21 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_val_if_fail (max_age != NULL, NULL);
#line 21 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTSDirective*) g_type_create_instance (object_type);
#line 22 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = soup_date_new_from_string (max_age);
#line 22 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	__vala_SoupDate_free0 (self->expires);
#line 22 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self->expires = _tmp0_;
#line 23 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self->sub_domains = include_sub_domains;
#line 21 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return self;
#line 2060 "midori-hsts.c"
}


MidoriHSTSDirective*
midori_hsts_directive_new (const gchar* max_age,
                           gboolean include_sub_domains)
{
#line 21 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return midori_hsts_directive_construct (MIDORI_HSTS_TYPE_DIRECTIVE, max_age, include_sub_domains);
#line 2070 "midori-hsts.c"
}


static gboolean
string_contains (const gchar* self,
                 const gchar* needle)
{
	gboolean result = FALSE;
	gchar* _tmp0_;
#line 1417 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, FALSE);
#line 1417 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, FALSE);
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	_tmp0_ = strstr ((gchar*) self, (gchar*) needle);
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	result = _tmp0_ != NULL;
#line 1418 "/usr/share/vala-0.40/vapi/glib-2.0.vapi"
	return result;
#line 2090 "midori-hsts.c"
}


MidoriHSTSDirective*
midori_hsts_directive_construct_from_header (GType object_type,
                                             const gchar* header)
{
	MidoriHSTSDirective* self = NULL;
	GHashTable* param_list = NULL;
	GHashTable* _tmp0_;
	GHashTable* _tmp1_;
	gchar* max_age = NULL;
	GHashTable* _tmp2_;
	gconstpointer _tmp3_;
	gchar* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	GHashTable* _tmp11_;
#line 26 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_val_if_fail (header != NULL, NULL);
#line 26 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = (MidoriHSTSDirective*) g_type_create_instance (object_type);
#line 27 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = soup_header_parse_param_list (header);
#line 27 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	param_list = _tmp0_;
#line 28 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp1_ = param_list;
#line 28 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp1_ == NULL) {
#line 29 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_hash_table_unref0 (param_list);
#line 29 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return self;
#line 2125 "midori-hsts.c"
	}
#line 31 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp2_ = param_list;
#line 31 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp3_ = g_hash_table_lookup (_tmp2_, "max-age");
#line 31 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp4_ = g_strdup ((const gchar*) _tmp3_);
#line 31 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	max_age = _tmp4_;
#line 32 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp5_ = max_age;
#line 32 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp5_ == NULL) {
#line 33 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_free0 (max_age);
#line 33 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_g_hash_table_unref0 (param_list);
#line 33 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return self;
#line 2145 "midori-hsts.c"
	}
#line 35 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp6_ = max_age;
#line 35 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (_tmp6_ != NULL) {
#line 2151 "midori-hsts.c"
		gint val = 0;
		const gchar* _tmp7_;
		gint _tmp8_;
#line 36 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp7_ = max_age;
#line 36 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		val = atoi (_tmp7_);
#line 37 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		_tmp8_ = val;
#line 37 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		if (_tmp8_ != 0) {
#line 2163 "midori-hsts.c"
			gint _tmp9_;
			SoupDate* _tmp10_;
#line 38 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp9_ = val;
#line 38 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			_tmp10_ = soup_date_new_from_now (_tmp9_);
#line 38 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			__vala_SoupDate_free0 (self->expires);
#line 38 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			self->expires = _tmp10_;
#line 2174 "midori-hsts.c"
		}
	}
#line 41 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (string_contains (header, "includeSubDomains")) {
#line 42 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		self->sub_domains = TRUE;
#line 2181 "midori-hsts.c"
	}
#line 44 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp11_ = param_list;
#line 44 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	soup_header_free_param_list (_tmp11_);
#line 26 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_free0 (max_age);
#line 26 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_hash_table_unref0 (param_list);
#line 26 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return self;
#line 2193 "midori-hsts.c"
}


MidoriHSTSDirective*
midori_hsts_directive_new_from_header (const gchar* header)
{
#line 26 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return midori_hsts_directive_construct_from_header (MIDORI_HSTS_TYPE_DIRECTIVE, header);
#line 2202 "midori-hsts.c"
}


gboolean
midori_hsts_directive_is_expired (MidoriHSTSDirective* self)
{
	gboolean result = FALSE;
	SoupDate* _tmp0_;
#line 47 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 48 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = self->expires;
#line 48 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	result = soup_date_is_past (_tmp0_);
#line 48 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return result;
#line 2219 "midori-hsts.c"
}


gboolean
midori_hsts_directive_is_valid (MidoriHSTSDirective* self)
{
	gboolean result = FALSE;
	SoupDate* _tmp0_;
#line 51 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_val_if_fail (self != NULL, FALSE);
#line 53 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_tmp0_ = self->expires;
#line 53 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	result = _tmp0_ != NULL;
#line 53 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return result;
#line 2236 "midori-hsts.c"
}


static void
midori_hsts_value_directive_init (GValue* value)
{
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	value->data[0].v_pointer = NULL;
#line 2245 "midori-hsts.c"
}


static void
midori_hsts_value_directive_free_value (GValue* value)
{
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (value->data[0].v_pointer) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		midori_hsts_directive_unref (value->data[0].v_pointer);
#line 2256 "midori-hsts.c"
	}
}


static void
midori_hsts_value_directive_copy_value (const GValue* src_value,
                                        GValue* dest_value)
{
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (src_value->data[0].v_pointer) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		dest_value->data[0].v_pointer = midori_hsts_directive_ref (src_value->data[0].v_pointer);
#line 2269 "midori-hsts.c"
	} else {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		dest_value->data[0].v_pointer = NULL;
#line 2273 "midori-hsts.c"
	}
}


static gpointer
midori_hsts_value_directive_peek_pointer (const GValue* value)
{
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return value->data[0].v_pointer;
#line 2283 "midori-hsts.c"
}


static gchar*
midori_hsts_value_directive_collect_value (GValue* value,
                                           guint n_collect_values,
                                           GTypeCValue* collect_values,
                                           guint collect_flags)
{
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (collect_values[0].v_pointer) {
#line 2295 "midori-hsts.c"
		MidoriHSTSDirective * object;
		object = collect_values[0].v_pointer;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		if (object->parent_instance.g_class == NULL) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 2302 "midori-hsts.c"
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 2306 "midori-hsts.c"
		}
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		value->data[0].v_pointer = midori_hsts_directive_ref (object);
#line 2310 "midori-hsts.c"
	} else {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		value->data[0].v_pointer = NULL;
#line 2314 "midori-hsts.c"
	}
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return NULL;
#line 2318 "midori-hsts.c"
}


static gchar*
midori_hsts_value_directive_lcopy_value (const GValue* value,
                                         guint n_collect_values,
                                         GTypeCValue* collect_values,
                                         guint collect_flags)
{
	MidoriHSTSDirective ** object_p;
	object_p = collect_values[0].v_pointer;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (!object_p) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
#line 2334 "midori-hsts.c"
	}
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (!value->data[0].v_pointer) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		*object_p = NULL;
#line 2340 "midori-hsts.c"
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		*object_p = value->data[0].v_pointer;
#line 2344 "midori-hsts.c"
	} else {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		*object_p = midori_hsts_directive_ref (value->data[0].v_pointer);
#line 2348 "midori-hsts.c"
	}
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return NULL;
#line 2352 "midori-hsts.c"
}


GParamSpec*
midori_hsts_param_spec_directive (const gchar* name,
                                  const gchar* nick,
                                  const gchar* blurb,
                                  GType object_type,
                                  GParamFlags flags)
{
	MidoriHSTSParamSpecDirective* spec;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_val_if_fail (g_type_is_a (object_type, MIDORI_HSTS_TYPE_DIRECTIVE), NULL);
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	G_PARAM_SPEC (spec)->value_type = object_type;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return G_PARAM_SPEC (spec);
#line 2372 "midori-hsts.c"
}


gpointer
midori_hsts_value_get_directive (const GValue* value)
{
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, MIDORI_HSTS_TYPE_DIRECTIVE), NULL);
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return value->data[0].v_pointer;
#line 2383 "midori-hsts.c"
}


void
midori_hsts_value_set_directive (GValue* value,
                                 gpointer v_object)
{
	MidoriHSTSDirective * old;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, MIDORI_HSTS_TYPE_DIRECTIVE));
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	old = value->data[0].v_pointer;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (v_object) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, MIDORI_HSTS_TYPE_DIRECTIVE));
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		value->data[0].v_pointer = v_object;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		midori_hsts_directive_ref (value->data[0].v_pointer);
#line 2406 "midori-hsts.c"
	} else {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		value->data[0].v_pointer = NULL;
#line 2410 "midori-hsts.c"
	}
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (old) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		midori_hsts_directive_unref (old);
#line 2416 "midori-hsts.c"
	}
}


void
midori_hsts_value_take_directive (GValue* value,
                                  gpointer v_object)
{
	MidoriHSTSDirective * old;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, MIDORI_HSTS_TYPE_DIRECTIVE));
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	old = value->data[0].v_pointer;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (v_object) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, MIDORI_HSTS_TYPE_DIRECTIVE));
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		value->data[0].v_pointer = v_object;
#line 2438 "midori-hsts.c"
	} else {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		value->data[0].v_pointer = NULL;
#line 2442 "midori-hsts.c"
	}
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (old) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		midori_hsts_directive_unref (old);
#line 2448 "midori-hsts.c"
	}
}


static void
midori_hsts_directive_class_init (MidoriHSTSDirectiveClass * klass)
{
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_directive_parent_class = g_type_class_peek_parent (klass);
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	((MidoriHSTSDirectiveClass *) klass)->finalize = midori_hsts_directive_finalize;
#line 2460 "midori-hsts.c"
}


static void
midori_hsts_directive_instance_init (MidoriHSTSDirective * self)
{
#line 18 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self->expires = NULL;
#line 19 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self->sub_domains = FALSE;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self->ref_count = 1;
#line 2473 "midori-hsts.c"
}


static void
midori_hsts_directive_finalize (MidoriHSTSDirective * obj)
{
	MidoriHSTSDirective * self;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MIDORI_HSTS_TYPE_DIRECTIVE, MidoriHSTSDirective);
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_signal_handlers_destroy (self);
#line 18 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	__vala_SoupDate_free0 (self->expires);
#line 2487 "midori-hsts.c"
}


GType
midori_hsts_directive_get_type (void)
{
	static volatile gsize midori_hsts_directive_type_id__volatile = 0;
	if (g_once_init_enter (&midori_hsts_directive_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { midori_hsts_value_directive_init, midori_hsts_value_directive_free_value, midori_hsts_value_directive_copy_value, midori_hsts_value_directive_peek_pointer, "p", midori_hsts_value_directive_collect_value, "p", midori_hsts_value_directive_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (MidoriHSTSDirectiveClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) midori_hsts_directive_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MidoriHSTSDirective), 0, (GInstanceInitFunc) midori_hsts_directive_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType midori_hsts_directive_type_id;
		midori_hsts_directive_type_id = g_type_register_fundamental (g_type_fundamental_next (), "MidoriHSTSDirective", &g_define_type_info, &g_define_type_fundamental_info, 0);
		g_once_init_leave (&midori_hsts_directive_type_id__volatile, midori_hsts_directive_type_id);
	}
	return midori_hsts_directive_type_id__volatile;
}


gpointer
midori_hsts_directive_ref (gpointer instance)
{
	MidoriHSTSDirective * self;
	self = instance;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_atomic_int_inc (&self->ref_count);
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	return instance;
#line 2516 "midori-hsts.c"
}


void
midori_hsts_directive_unref (gpointer instance)
{
	MidoriHSTSDirective * self;
	self = instance;
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		MIDORI_HSTS_DIRECTIVE_GET_CLASS (self)->finalize (self);
#line 17 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
		g_type_free_instance ((GTypeInstance *) self);
#line 2531 "midori-hsts.c"
	}
}


static void
midori_hsts_class_init (MidoriHSTSClass * klass)
{
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_parent_class = g_type_class_peek_parent (klass);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	g_type_class_add_private (klass, sizeof (MidoriHSTSPrivate));
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	G_OBJECT_CLASS (klass)->finalize = midori_hsts_finalize;
#line 2545 "midori-hsts.c"
}


static void
midori_hsts_soup_session_feature_interface_init (SoupSessionFeatureInterface * iface)
{
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	midori_hsts_soup_session_feature_parent_iface = g_type_interface_peek_parent (iface);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	iface->add_feature = (gboolean (*) (SoupSessionFeature *, GType)) midori_hsts_real_add_feature;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	iface->remove_feature = (gboolean (*) (SoupSessionFeature *, GType)) midori_hsts_real_remove_feature;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	iface->has_feature = (gboolean (*) (SoupSessionFeature *, GType)) midori_hsts_real_has_feature;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	iface->attach = (void (*) (SoupSessionFeature *, SoupSession*)) midori_hsts_real_attach;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	iface->detach = (void (*) (SoupSessionFeature *, SoupSession*)) midori_hsts_real_detach;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	iface->request_started = (void (*) (SoupSessionFeature *, SoupSession*, SoupMessage*, SoupSocket*)) midori_hsts_real_request_started;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	iface->request_queued = (void (*) (SoupSessionFeature *, SoupSession*, SoupMessage*)) midori_hsts_real_request_queued;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	iface->request_unqueued = (void (*) (SoupSessionFeature *, SoupSession*, SoupMessage*)) midori_hsts_real_request_unqueued;
#line 2570 "midori-hsts.c"
}


static void
midori_hsts_instance_init (MidoriHSTS * self)
{
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self->priv = MIDORI_HSTS_GET_PRIVATE (self);
#line 58 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self->priv->debug = FALSE;
#line 2581 "midori-hsts.c"
}


static void
midori_hsts_finalize (GObject * obj)
{
	MidoriHSTS * self;
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, MIDORI_TYPE_HSTS, MidoriHSTS);
#line 57 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	_g_hash_table_unref0 (self->priv->whitelist);
#line 16 "/home/midiba/Documents/glibc/pvd-aware-app/midori/katze/midori-hsts.vala"
	G_OBJECT_CLASS (midori_hsts_parent_class)->finalize (obj);
#line 2595 "midori-hsts.c"
}


GType
midori_hsts_get_type (void)
{
	static volatile gsize midori_hsts_type_id__volatile = 0;
	if (g_once_init_enter (&midori_hsts_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (MidoriHSTSClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) midori_hsts_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (MidoriHSTS), 0, (GInstanceInitFunc) midori_hsts_instance_init, NULL };
		static const GInterfaceInfo soup_session_feature_info = { (GInterfaceInitFunc) midori_hsts_soup_session_feature_interface_init, (GInterfaceFinalizeFunc) NULL, NULL};
		GType midori_hsts_type_id;
		midori_hsts_type_id = g_type_register_static (G_TYPE_OBJECT, "MidoriHSTS", &g_define_type_info, 0);
		g_type_add_interface_static (midori_hsts_type_id, soup_session_feature_get_type (), &soup_session_feature_info);
		g_once_init_leave (&midori_hsts_type_id__volatile, midori_hsts_type_id);
	}
	return midori_hsts_type_id__volatile;
}


static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint
_vala_array_length (gpointer array)
{
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



